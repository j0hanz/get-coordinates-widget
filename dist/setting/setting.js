System.register(["jimu-core","jimu-ui/advanced/setting-components","jimu-ui/basic/color-picker","jimu-ui","jimu-theme"],(function(e,t){var s={},n={},a={},i={},o={};return{setters:[function(e){s.React=e.React,s.css=e.css,s.hooks=e.hooks,s.jsx=e.jsx},function(e){n.MapWidgetSelector=e.MapWidgetSelector,n.SettingRow=e.SettingRow,n.SettingSection=e.SettingSection},function(e){a.ColorPicker=e.ColorPicker},function(e){i.AdvancedButtonGroup=e.AdvancedButtonGroup,i.Button=e.Button,i.MultiSelect=e.MultiSelect,i.MultiSelectItem=e.MultiSelectItem,i.NumericInput=e.NumericInput,i.SVG=e.SVG,i.Switch=e.Switch},function(e){o.useTheme=e.useTheme}],execute:function(){e((()=>{var e={1888:e=>{"use strict";e.exports=o},4321:e=>{"use strict";e.exports=i},4337:e=>{"use strict";e.exports=a},6426:e=>{e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,s=[],n=0;n<e.rangeCount;n++)s.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||s.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},7965:(e,t,s)=>{"use strict";var n=s(6426),a={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var s,i,o,r,l,c,d=!1;t||(t={}),s=t.debug||!1;try{if(o=n(),r=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=e,c.ariaHidden="true",c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),void 0===n.clipboardData){s&&console.warn("unable to use e.clipboardData"),s&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=a[t.format]||a.default;window.clipboardData.setData(i,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(c),r.selectNodeContents(c),l.addRange(r),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");d=!0}catch(n){s&&console.error("unable to copy using execCommand: ",n),s&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),d=!0}catch(n){s&&console.error("unable to copy using clipboardData: ",n),s&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(r):l.removeAllRanges()),c&&document.body.removeChild(c),o()}return d}},9244:e=>{"use strict";e.exports=s},9298:e=>{"use strict";e.exports=n}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="";var l={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(l),r.d(l,{__set_webpack_public_path__:()=>ce,default:()=>le});var e=r(9244),t=r(9298),s=r(4337),n=r(4321),a=r(1888);r(7965);const i=e=>{if(!((e,t)=>"boolean"==typeof e?e:!!Array.isArray(t)&&t.length>0)(e.hasMap,e.mapWidgetIds))return{hasMap:!1,hasFormats:!1,status:"no-map",messageKey:"noView"};return((e,t)=>"boolean"==typeof e?e:!!Array.isArray(t)&&t.length>0)(e.hasFormats,e.enabledWkids)?{hasMap:!0,hasFormats:!0,status:"ready",messageKey:null}:{hasMap:!0,hasFormats:!1,status:"no-formats",messageKey:"noFormats"}},o=(e,t)=>"boolean"==typeof t?t:!!e?.target?.checked,c=e=>{if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e&&""!==e.trim()){const t=Number(e);if(Number.isFinite(t))return t}return null},d=(e,t,s)=>Math.min(s,Math.max(t,e)),u=(new Set(["sweref99","rt90","wgs84","etrs89","itrf"]),Object.freeze({min:0,max:6})),p=(new Set(["latitude","longitude"]),Object.freeze([{id:"sweref_99_tm",wkid:3006,label:"SWEREF 99 TM (EPSG:3006)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_12_00",wkid:3007,label:"SWEREF 99 12 00 (EPSG:3007)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_13_30",wkid:3008,label:"SWEREF 99 13 30 (EPSG:3008)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_15_00",wkid:3009,label:"SWEREF 99 15 00 (EPSG:3009)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_16_30",wkid:3010,label:"SWEREF 99 16 30 (EPSG:3010)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_18_00",wkid:3011,label:"SWEREF 99 18 00 (EPSG:3011)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_14_15",wkid:3012,label:"SWEREF 99 14 15 (EPSG:3012)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_15_45",wkid:3013,label:"SWEREF 99 15 45 (EPSG:3013)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_17_15",wkid:3014,label:"SWEREF 99 17 15 (EPSG:3014)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_18_45",wkid:3015,label:"SWEREF 99 18 45 (EPSG:3015)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_20_15",wkid:3016,label:"SWEREF 99 20 15 (EPSG:3016)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_21_45",wkid:3017,label:"SWEREF 99 21 45 (EPSG:3017)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_23_15",wkid:3018,label:"SWEREF 99 23 15 (EPSG:3018)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_24_00",wkid:3019,label:"SWEREF 99 24 00 (EPSG:3019)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"}])),g=Object.freeze([{id:"rt90_7_5_gon_v",wkid:3020,label:"RT 90 7,5 gon V (EPSG:3020)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_5_gon_v",wkid:3021,label:"RT 90 5 gon V (EPSG:3021)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_2_5_gon_v",wkid:3022,label:"RT 90 2,5 gon V (EPSG:3022)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_0_gon",wkid:3023,label:"RT 90 0 gon (EPSG:3023)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_2_5_gon_o",wkid:3024,label:"RT 90 2,5 gon O (EPSG:3024)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_5_gon_o",wkid:3025,label:"RT 90 5 gon O (EPSG:3025)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"}]),y=Object.freeze([{id:"wgs84",wkid:4326,label:"WGS 84 lat/long (EPSG:4326)",system:"wgs84",axisMessageKeys:["latitude","longitude"],valueOrder:"yx"}]),f=Object.freeze([{id:"sweref_99_geodetic",wkid:4669,label:"SWEREF 99 lat/long (EPSG:4669)",system:"sweref99",axisMessageKeys:["latitude","longitude"],valueOrder:"yx"}]),m=Object.freeze([{id:"wgs84_web_mercator",wkid:3857,label:"WGS 84 Web Mercator (EPSG:3857)",system:"wgs84",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"wgs84_utm33n",wkid:32633,label:"WGS 84 / UTM zone 33N (EPSG:32633)",system:"wgs84",axisMessageKeys:["easting","northing"],valueOrder:"xy"}]),b=Object.freeze([{id:"etrs89",wkid:4258,label:"ETRS89 lat/long (EPSG:4258)",system:"etrs89",axisMessageKeys:["latitude","longitude"],valueOrder:"yx"}]),w=Object.freeze([{id:"itrf2014",wkid:7912,label:"ITRF2014 lat/long (EPSG:7912)",system:"itrf",axisMessageKeys:["latitude","longitude"],valueOrder:"yx"}]),x=3006,h=Object.freeze([...p,...f]),S=Object.freeze([...y,...m]),k=Object.freeze(h.map((e=>e.wkid))),v=(new Set(k),Object.freeze([...k])),E=Object.freeze({sweref99:{messageKey:"systemLabelSweref99",defaultLabel:"SWEREF 99"},rt90:{messageKey:"systemLabelRt90",defaultLabel:"RT 90"},wgs84:{messageKey:"systemLabelWgs84",defaultLabel:"WGS 84"},etrs89:{messageKey:"systemLabelEtrs89",defaultLabel:"ETRS89"},itrf:{messageKey:"systemLabelItrf",defaultLabel:"ITRF2014"}}),C=Object.freeze([{id:"sweref99",label:E.sweref99.defaultLabel,labelMessageKey:E.sweref99.messageKey,defaultWkid:x,options:h},{id:"rt90",label:E.rt90.defaultLabel,labelMessageKey:E.rt90.messageKey,defaultWkid:3022,options:g},{id:"wgs84",label:E.wgs84.defaultLabel,labelMessageKey:E.wgs84.messageKey,defaultWkid:4326,options:S},{id:"etrs89",label:E.etrs89.defaultLabel,labelMessageKey:E.etrs89.messageKey,defaultWkid:4258,options:b},{id:"itrf",label:E.itrf.defaultLabel,labelMessageKey:E.itrf.messageKey,defaultWkid:7912,options:w}]),M=C.flatMap((e=>Array.from(e.options))),j=new Map(M.map((e=>[e.wkid,e]))),R=(new Map(M.map(((e,t)=>[e.wkid,t]))),new Map(C.map((e=>[e.id,e])))),O=(Object.freeze({sweref99:x,rt90:3022,wgs84:4326,etrs89:4258,itrf:7912}),/^#([0-9a-f]{6}|[0-9a-f]{8})$/i),_="#000000",W=Object.freeze([{id:"classicPin",labelMessageKey:"pinIconClassicPin",viewBox:"0 0 32 32",svgBody:'<path fill="{{color}}" d="M16 3.5A7.5 7.5 0 0 0 8.5 11c0 4.143 7.5 18.12 7.5 18.12S23.5 15.144 23.5 11A7.5 7.5 0 0 0 16 3.5zm0 11.084a3.583 3.583 0 1 1 0-7.168a3.583 3.583 0 1 1 0 7.168z"/>',mapSymbol:{width:22,height:22,yOffset:10}},{id:"targetCircle",labelMessageKey:"pinIconTargetCircle",viewBox:"0 0 2048 2048",svgBody:'<path fill="{{color}}" d="M1024 128q123 0 237 32t214 90t182 141t140 181t91 214t32 238q0 123-32 237t-90 214t-141 182t-181 140t-214 91t-238 32q-123 0-237-32t-214-90t-182-141t-140-181t-91-214t-32-238q0-123 32-237t90-214t141-182t181-140t214-91t238-32zm0 1664q106 0 204-27t183-78t156-120t120-155t77-184t28-204q0-106-27-204t-78-183t-120-156t-155-120t-184-77t-204-28q-106 0-204 27t-183 78t-156 120t-120 155t-77 184t-28 204q0 106 27 204t78 183t120 156t155 120t184 77t204 28zm0-1152q79 0 149 30t122 83t82 122t31 149q0 79-30 149t-83 122t-122 82t-149 31q-79 0-149-30t-122-83t-82-122t-31-149q0-79 30-149t83-122t122-82t149-31z"/>',mapSymbol:{width:22,height:22,yOffset:0}},{id:"dropMarker",labelMessageKey:"pinIconDropMarker",viewBox:"-7 -1.5 24 24",svgBody:'<path fill="{{color}}" d="M4 10.465a5.002 5.002 0 0 1 1-9.9a5 5 0 0 1 1 9.9v9.1a1 1 0 0 1-2 0v-9.1z"/>',mapSymbol:{width:22,height:22,yOffset:10}},{id:"beaconPin",labelMessageKey:"pinIconBeaconPin",viewBox:"0 0 1024 1024",svgBody:'<path fill="{{color}}" d="M480 512h64v320h-64z"/><path fill="{{color}}" d="M192 896h640a64 64 0 0 0-64-64H256a64 64 0 0 0-64 64zm64-128h512a128 128 0 0 1 128 128v64H128v-64a128 128 0 0 1 128-128zm256-256a192 192 0 1 0 0-384a192 192 0 0 0 0 384zm0 64a256 256 0 1 1 0-512a256 256 0 0 1 0 512z"/>',mapSymbol:{width:22,height:22,yOffset:6}},{id:"ringPin",labelMessageKey:"pinIconRingPin",viewBox:"0 0 24 24",svgBody:'<g fill="none" stroke="{{color}}" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M2 12h3m14 0h3M12 2v3m0 14v3"/><circle cx="12" cy="12" r="7"/><circle cx="12" cy="12" r="3"/></g>',mapSymbol:{width:22,height:22,yOffset:0}}]),I=new Map(W.map((e=>[e.id,e]))),K=W[0].id,P=Object.freeze([{key:"json",extension:"json",mime:"application/json",messageKey:"exportJson"},{key:"xml",extension:"xml",mime:"application/xml",messageKey:"exportXml"},{key:"yaml",extension:"yaml",mime:"application/x-yaml",messageKey:"exportYaml"}]),F=(new Map(P.map((e=>[e.key,e]))),e=>{const t=c(e);return null===t?null:t}),A=(e,t)=>{if("boolean"==typeof e)return e;if("string"==typeof e){const t=e.trim().toLowerCase();if("true"===t)return!0;if("false"===t)return!1}if("number"==typeof e){if(1===e)return!0;if(0===e)return!1}return t},G=e=>{const t=e.trim();if(!t)return null;const s=t.startsWith("#")?t:`#${t}`;return O.test(s)?s.toUpperCase():null},B={precision:(e,t,s)=>{const n="number"==typeof s?.min?s.min:u.min,a="number"==typeof s?.max?s.max:u.max,i=F(e);if(null===i){const e=F(t),s=null===e?u.min:e;return d(Math.round(s),n,a)}return d(Math.round(i),n,a)},hexColor:(e,t)=>{if("string"==typeof e){const t=G(e);if(t)return t}return G(t)??_},pinIconId:(e,t)=>"string"==typeof e&&I.has(e)?e:t&&I.has(t)?t:K,wkid:(e,t)=>{const s=F(e);if(null===s)return t;const n=j.get(s);return n?n.wkid:t}},T={restrictEnabledWkids:(e,t,s)=>{const n=z(t),a=new Set(n.map((e=>e.wkid))),i=new Set;if(Array.isArray(e))for(const t of e){const e=c(t);null!=e&&i.add(e)}const o=[];for(const e of n)i.has(e.wkid)&&a.has(e.wkid)&&o.push(e.wkid);return 0!==o.length||s?.allowEmpty?o:n.map((e=>e.wkid))}},z=e=>e?M.map((e=>({...e}))):h.map((e=>({...e}))),L=(e,t)=>Array.isArray(t)&&t.includes(e)?e:Array.isArray(t)&&t.length>0?t[0]:x,D=(e,t)=>((e,t)=>{const s=t.replace(/\s+/g," ").trim();if(!s)return null;const n=s.split(/\s+/).map((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))).join("\\s+"),a=new RegExp(`^${n}(?:\\s*[-\u2013\u2014]\\s*|\\s+)`,"i"),i=e.match(a);return i?e.slice(i[0].length).trim():null})(e,t),N=(e,t)=>{const s=((e,t)=>{const s=R.get(e.system),n=s?t(s.labelMessageKey):null;return n&&n!==s?.label?n:s?.label??e.system.toUpperCase()})(e,t),n=e.label.trim(),a=((e,t)=>{const s=R.get(e.system),n=s?t(s.labelMessageKey):null,a=s?.label??e.system.toUpperCase(),i=new Set;return n&&i.add(n),a&&i.add(a),n&&i.add(n.replace(/\s+/g,"")),a&&i.add(a.replace(/\s+/g,"")),Array.from(i).filter(Boolean)})(e,t);let i=null;for(const e of a){const t=D(n,e);if(null!==t){i=t;break}}const o=i??n;return o?o.toLowerCase().startsWith(s.toLowerCase())?o:`${s} \u2013 ${o}`:s},U=Object.freeze({swerefWkid:x,precision:u.min,showExportButton:!1,copyOnClick:!1,enablePin:!0,includeExtendedSystems:!1,enabledWkids:Array.from(v),pinFillColor:_,pinIconId:K}),q=(e,t)=>{const s=(e=>{if(Array.isArray(e))return e;if(e&&"object"==typeof e){const t=e;if("function"==typeof t.toArray)try{return t.toArray()}catch{return[]}if("function"==typeof t.toJS)try{const e=t.toJS();return Array.isArray(e)?e:[]}catch{return[]}}return[]})(e);return T.restrictEnabledWkids(s,t,{allowEmpty:!1})},V=(e,t)=>((e,t)=>{if(!e||"object"!=typeof e)return;if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const s=e;if("function"==typeof s.get)try{return s.get(t)}catch{return}})(e,t),$=e=>{const t={swerefWkid:U.swerefWkid,precision:U.precision,showExportButton:U.showExportButton,copyOnClick:U.copyOnClick,enablePin:U.enablePin,includeExtendedSystems:U.includeExtendedSystems,enabledWkids:Array.from(U.enabledWkids),pinFillColor:U.pinFillColor,pinIconId:U.pinIconId},s=A(V(e,"includeExtendedSystems"),t.includeExtendedSystems),n=q(V(e,"enabledWkids"),s);return{swerefWkid:L(B.wkid(V(e,"swerefWkid"),x),n),precision:B.precision(V(e,"precision"),t.precision),showExportButton:A(V(e,"showExportButton"),t.showExportButton),copyOnClick:A(V(e,"copyOnClick"),t.copyOnClick),enablePin:A(V(e,"enablePin"),t.enablePin),includeExtendedSystems:s,enabledWkids:n,pinFillColor:B.hexColor(V(e,"pinFillColor"),t.pinFillColor),pinIconId:B.pinIconId(V(e,"pinIconId"))}},H={settingsTitle:"Get Coordinates \u2013 Widget Settings",mapSection:"Map View",noView:"No map view selected",noFormats:"No coordinate formats selected",availableOutputs:"Available coordinate formats",includeExtendedSystems:"Show extended coordinate systems",precision:"Number of decimals",precisionHelper:"Specify number of decimals. 0\u20133 for meter precision, 4\u20136 for centimeter level. Geodetic formats use at least 5 decimals",showExportButton:"Show 'Export' button",enablePin:"Enable map marker",copyOnClick:"Copy coordinates on map click",pinColor:"Map marker color",pinIcon:"Map marker symbol",systemLabelSweref99:"SWEREF 99",systemLabelRt90:"RT 90",systemLabelWgs84:"WGS 84",systemLabelEtrs89:"ETRS 89",systemLabelItrf:"ITRF 2014",pinIconClassicPin:"Classic pin",pinIconTargetCircle:"Target circle",pinIconDropMarker:"Drop marker",pinIconBeaconPin:"Beacon pin",pinIconRingPin:"Ring marker"},J=(0,e.css)({display:"flex",width:"100%",flexDirection:"column",minWidth:0}),X=(0,e.css)({marginTop:4,opacity:.7}),Y=(0,e.css)({display:"flex",width:"100%",flexWrap:"nowrap",gap:8,justifyContent:"space-between","& > button":{flex:"0 0 44px",height:42,padding:0,display:"flex",alignItems:"center",justifyContent:"center"}}),Q=(0,e.css)({width:28,height:28,pointerEvents:"none"}),Z=(0,e.css)({marginTop:8,opacity:.75}),{restrictEnabledWkids:ee}=T,{precision:te,hexColor:se,pinIconId:ne}=B,ae=(e,t)=>{if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e){const t=parseInt(e,10);if(Number.isFinite(t))return t}if(t?.target){const e=parseInt(t.target.value,10);if(Number.isFinite(e))return e}return null},ie=(e,t)=>{"undefined"!=typeof console&&("function"!=typeof console.debug?"function"==typeof console.info&&console.info("[Koordinater][Settings]",e,t):console.debug("[Koordinater][Settings]",e,t))},oe=({value:t,defaultValue:n,onChange:a,"aria-label":i})=>(0,e.jsx)(s.ColorPicker,{color:t||n||"#000000",onChange:e=>{a?.(e)},"aria-label":i,css:J}),re=({definition:t,color:s})=>{const a=se(s,_),i=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="${t.viewBox}">${t.svgBody.replace(/{{color}}/g,a)}</svg>`;let o=null;try{const e="undefined"!=typeof window&&"function"==typeof window.btoa?window.btoa:"function"==typeof btoa?btoa:null;if(e){const t=encodeURIComponent(i).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(parseInt(t,16))));o=`data:image/svg+xml;base64,${e(t)}`}}catch{o=null}return o||(o=`data:image/svg+xml;utf8,${encodeURIComponent(i)}`),(0,e.jsx)(n.SVG,{src:o,role:"img","aria-hidden":"true",focusable:"false",css:Q,currentColor:!1})},le=s=>{(0,a.useTheme)();const r=e.hooks.useTranslation(H),l=s.config,c=$(l),d=e.hooks.useLatest(c.precision),p=ee(c.enabledWkids,c.includeExtendedSystems,{allowEmpty:!0}),[g,y]=e.React.useState((()=>c.includeExtendedSystems)),[f,m]=e.React.useState((()=>[...p])),[b,w]=e.React.useState((()=>L(c.swerefWkid,p))),[x,h]=e.React.useState((()=>c.precision)),[S,k]=e.React.useState((()=>!!c.showExportButton)),[v,E]=e.React.useState((()=>!!c.copyOnClick)),[C,M]=e.React.useState((()=>!!c.enablePin)),[j,R]=e.React.useState((()=>c.pinFillColor||_)),[O,I]=e.React.useState((()=>c.pinIconId||K)),P=W,F=e.hooks.useLatest(O),A=e.React.useRef(p.map(String).sort().join("|")),G=z(g).map((e=>({value:e.wkid.toString(),label:N(e,r)}))),B=i({hasMap:!!s.useMapWidgetIds?.length,enabledWkids:f}),T=B.hasMap,D=B.hasFormats,U="no-map"===B.status&&B.messageKey?r(B.messageKey):null,q="no-formats"===B.status&&B.messageKey?r(B.messageKey):null;e.hooks.useUpdateEffect((()=>{const e=$(l),t=e.includeExtendedSystems,s=ee(e.enabledWkids,t,{allowEmpty:!0});A.current=s.map(String).sort().join("|"),y(t),m(s),w(L(e.swerefWkid,s)),h(e.precision),k(!!e.showExportButton),E(!!e.copyOnClick),M(!!e.enablePin),R(e.pinFillColor||_),I(e.pinIconId||K)}),[l]);const V=e.hooks.useEventCallback((e=>{let t=s.config;for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const n=e[s];void 0!==n&&(t=t.set(s,n))}s.onSettingChange({id:s.id,config:t})})),Q=e.hooks.useEventCallback((e=>{s.onSettingChange({id:s.id,useMapWidgetIds:e})})),le=e.hooks.useEventCallback(((e,t,s)=>{const n=(e=>{return e?Array.isArray(e)?[...e]:"object"==typeof(t=e)&&null!==t&&"function"==typeof t.toArray?e.toArray():[]:[];var t})(e),a=n.map(String).sort().join("|");if(a===A.current)return;A.current=a;const i=ee(n,g,{allowEmpty:!0});m(i),ie("availableOutputsChange",{source:t,includeExtended:g,rawValue:s,enabledWkids:i});let o={enabledWkids:i};const r=L(b,i);r!==b&&(w(r),o={...o,swerefWkid:r}),V(o)})),ce=e.hooks.useEventCallback(((e,t)=>{const s=o(e,t);if(y(s),!s){const e=ee(f,!1,{allowEmpty:!0});A.current=e.map(String).sort().join("|"),m(e);let t={includeExtendedSystems:s,enabledWkids:e};const n=L(b,e);return n!==b&&(w(n),t={...t,swerefWkid:n}),void V(t)}V({includeExtendedSystems:s,enabledWkids:f})})),de=e.hooks.useEventCallback(((e,t)=>{le(t,"change",e)})),ue=e.hooks.useEventCallback(((e,t,s)=>{le(s,"click",t)})),pe=e.hooks.useEventCallback((e=>{const t=Number.isFinite(x)?x:d.current,s=te(e,t);h(s),V({precision:s})})),ge=e.hooks.useEventCallback(((e,t)=>{const s=ae(e,t);null!=s&&pe(s)})),ye=e.hooks.useEventCallback((()=>{const e=Number.isFinite(x)?x:u.min;pe(e)})),fe=e.hooks.useEventCallback(((e,t)=>(s,n)=>{const a=o(s,n);e(a),V({[t]:a})})),me=e.hooks.useEventCallback((e=>{const t=se(e,_);R(t),V({pinFillColor:t})})),be=e.hooks.useEventCallback((e=>{const t=ne(e,K);t!==F.current&&(I(t),V({pinIconId:t}),ie("pinIconChange",{pinIconId:t}))}));return(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(t.SettingSection,{title:r("mapSection")},(0,e.jsx)(t.SettingRow,{level:1,label:"",flow:"wrap"},(0,e.jsx)(t.MapWidgetSelector,{onSelect:Q,useMapWidgetIds:s.useMapWidgetIds})),!T&&U&&(0,e.jsx)(t.SettingRow,{level:1,label:"",flow:"wrap"},(0,e.jsx)("div",{css:Z,role:"status","aria-live":"polite"},U))),T&&(0,e.jsx)(t.SettingSection,null,(0,e.jsx)(t.SettingRow,{level:1,label:r("includeExtendedSystems"),tag:"label",flow:"no-wrap"},(0,e.jsx)(n.Switch,{checked:!!g,onChange:ce})),(0,e.jsx)(t.SettingRow,{level:1,label:r("availableOutputs"),tag:"label",flow:"wrap"},(0,e.jsx)(n.MultiSelect,{values:f.map(String),onChange:de,onClickItem:ue,placeholder:r("availableOutputs"),items:G,css:J},G.map((t=>(0,e.jsx)(n.MultiSelectItem,{key:t.value,value:t.value,label:t.label}))))),!D&&q&&(0,e.jsx)(t.SettingRow,{level:1,label:"",flow:"wrap"},(0,e.jsx)("div",{css:Z,role:"status","aria-live":"polite"},q))),T&&D&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(t.SettingSection,null,(0,e.jsx)(t.SettingRow,{level:1,label:r("precision"),tag:"label",flow:"wrap"},(0,e.jsx)(n.NumericInput,{value:Number.isFinite(x)?x:u.min,onChange:ge,onAcceptValue:e=>{const t=ae(e);null==t?ye():pe(t)},min:u.min,max:u.max,"aria-label":r("precision"),css:J}),(0,e.jsx)("div",{css:X},r("precisionHelper")))),(0,e.jsx)(t.SettingSection,null,(0,e.jsx)(t.SettingRow,{level:1,label:r("showExportButton"),tag:"label",flow:"no-wrap"},(0,e.jsx)(n.Switch,{checked:!!S,onChange:fe(k,"showExportButton")})),(0,e.jsx)(t.SettingRow,{level:1,label:r("enablePin"),tag:"label",flow:"no-wrap"},(0,e.jsx)(n.Switch,{checked:!!C,onChange:fe(M,"enablePin")})),(0,e.jsx)(t.SettingRow,{level:1,label:r("copyOnClick"),tag:"label",flow:"no-wrap"},(0,e.jsx)(n.Switch,{checked:!!v,onChange:fe(E,"copyOnClick")}))),C&&(0,e.jsx)(t.SettingSection,null,(0,e.jsx)(t.SettingRow,{level:1,label:r("pinColor"),tag:"label",flow:"wrap"},(0,e.jsx)(oe,{value:j,onChange:me,"aria-label":r("pinColor")})),(0,e.jsx)(t.SettingRow,{level:1,label:r("pinIcon"),tag:"label",flow:"wrap"},(0,e.jsx)(n.AdvancedButtonGroup,{css:Y,size:"sm"},P.map((t=>{const s=r(t.labelMessageKey),a=O===t.id;return(0,e.jsx)(n.Button,{key:t.id,icon:!0,type:"tertiary",active:a,onClick:()=>be(t.id),"aria-label":s,title:s},(0,e.jsx)(re,{definition:t,color:j}))})))))))};function ce(e){r.p=e}})(),l})())}}}));