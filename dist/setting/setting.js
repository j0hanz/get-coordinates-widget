System.register(["jimu-core","jimu-ui/advanced/setting-components","jimu-ui/basic/color-picker","jimu-ui","jimu-theme"],(function(e,t){var a={},s={},n={},r={},i={};return{setters:[function(e){a.React=e.React,a.css=e.css,a.hooks=e.hooks,a.jsx=e.jsx},function(e){s.MapWidgetSelector=e.MapWidgetSelector,s.SettingRow=e.SettingRow,s.SettingSection=e.SettingSection},function(e){n.ColorPicker=e.ColorPicker},function(e){r.AdvancedButtonGroup=e.AdvancedButtonGroup,r.Button=e.Button,r.Collapse=e.Collapse,r.MultiSelect=e.MultiSelect,r.MultiSelectItem=e.MultiSelectItem,r.NumericInput=e.NumericInput,r.SVG=e.SVG,r.Switch=e.Switch,r.Tooltip=e.Tooltip},function(e){i.useTheme=e.useTheme}],execute:function(){e((()=>{var e={1888:e=>{"use strict";e.exports=i},4321:e=>{"use strict";e.exports=r},4337:e=>{"use strict";e.exports=n},5508:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},6426:e=>{e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],s=0;s<e.rangeCount;s++)a.push(e.getRangeAt(s));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},7965:(e,t,a)=>{"use strict";var s=a(6426),n={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var a,r,i,o,l,c,d=!1;t||(t={}),a=t.debug||!1;try{if(i=s(),o=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=e,c.ariaHidden="true",c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(s){if(s.stopPropagation(),t.format)if(s.preventDefault(),void 0===s.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=n[t.format]||n.default;window.clipboardData.setData(r,e)}else s.clipboardData.clearData(),s.clipboardData.setData(t.format,e);t.onCopy&&(s.preventDefault(),t.onCopy(s.clipboardData))})),document.body.appendChild(c),o.selectNodeContents(c),l.addRange(o),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");d=!0}catch(s){a&&console.error("unable to copy using execCommand: ",s),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),d=!0}catch(s){a&&console.error("unable to copy using clipboardData: ",s),a&&console.error("falling back to prompt"),r=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(r,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(o):l.removeAllRanges()),c&&document.body.removeChild(c),i()}return d}},9244:e=>{"use strict";e.exports=a},9298:e=>{"use strict";e.exports=s}},t={};function o(a){var s=t[a];if(void 0!==s)return s.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="";var l={};return o.p=window.jimuConfig.baseUrl,(()=>{"use strict";o.r(l),o.d(l,{__set_webpack_public_path__:()=>he,default:()=>be});var e=o(9244),t=o(9298),a=o(4337),s=o(4321),n=o(1888),r=o(5508),i=o.n(r);new Set(["sweref99","rt90","wgs84","etrs89","itrf"]);const c=Object.freeze({min:0,max:6}),d=(new Set(["latitude","longitude"]),Object.freeze([{id:"sweref_99_tm",wkid:3006,label:"SWEREF 99 TM (EPSG:3006)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy",metadata:{centralMeridian:15,scaleFactor:.9996,falseNorthing:0,falseEasting:5e5,ellipsoid:"GRS80"}},{id:"sweref_99_12_00",wkid:3007,label:"SWEREF 99 12 00 (EPSG:3007)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy",metadata:{centralMeridian:12,scaleFactor:1,falseNorthing:0,falseEasting:15e4,ellipsoid:"GRS80"}},{id:"sweref_99_13_30",wkid:3008,label:"SWEREF 99 13 30 (EPSG:3008)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy",metadata:{centralMeridian:13.5,scaleFactor:1,falseNorthing:0,falseEasting:15e4,ellipsoid:"GRS80"}},{id:"sweref_99_15_00",wkid:3009,label:"SWEREF 99 15 00 (EPSG:3009)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy",metadata:{centralMeridian:15,scaleFactor:1,falseNorthing:0,falseEasting:15e4,ellipsoid:"GRS80"}},{id:"sweref_99_16_30",wkid:3010,label:"SWEREF 99 16 30 (EPSG:3010)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy",metadata:{centralMeridian:16.5,scaleFactor:1,falseNorthing:0,falseEasting:15e4,ellipsoid:"GRS80"}},{id:"sweref_99_18_00",wkid:3011,label:"SWEREF 99 18 00 (EPSG:3011)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy",metadata:{centralMeridian:18,scaleFactor:1,falseNorthing:0,falseEasting:15e4,ellipsoid:"GRS80"}},{id:"sweref_99_14_15",wkid:3012,label:"SWEREF 99 14 15 (EPSG:3012)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy",metadata:{centralMeridian:14.25,scaleFactor:1,falseNorthing:0,falseEasting:15e4,ellipsoid:"GRS80"}},{id:"sweref_99_15_45",wkid:3013,label:"SWEREF 99 15 45 (EPSG:3013)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy",metadata:{centralMeridian:15.75,scaleFactor:1,falseNorthing:0,falseEasting:15e4,ellipsoid:"GRS80"}},{id:"sweref_99_17_15",wkid:3014,label:"SWEREF 99 17 15 (EPSG:3014)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy",metadata:{centralMeridian:17.25,scaleFactor:1,falseNorthing:0,falseEasting:15e4,ellipsoid:"GRS80"}},{id:"sweref_99_18_45",wkid:3015,label:"SWEREF 99 18 45 (EPSG:3015)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy",metadata:{centralMeridian:18.75,scaleFactor:1,falseNorthing:0,falseEasting:15e4,ellipsoid:"GRS80"}},{id:"sweref_99_20_15",wkid:3016,label:"SWEREF 99 20 15 (EPSG:3016)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy",metadata:{centralMeridian:20.25,scaleFactor:1,falseNorthing:0,falseEasting:15e4,ellipsoid:"GRS80"}},{id:"sweref_99_21_45",wkid:3017,label:"SWEREF 99 21 45 (EPSG:3017)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy",metadata:{centralMeridian:21.75,scaleFactor:1,falseNorthing:0,falseEasting:15e4,ellipsoid:"GRS80"}},{id:"sweref_99_23_15",wkid:3018,label:"SWEREF 99 23 15 (EPSG:3018)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy",metadata:{centralMeridian:23.25,scaleFactor:1,falseNorthing:0,falseEasting:15e4,ellipsoid:"GRS80"}},{id:"sweref_99_24_00",wkid:3019,label:"SWEREF 99 24 00 (EPSG:3019)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy",metadata:{centralMeridian:24,scaleFactor:1,falseNorthing:0,falseEasting:15e4,ellipsoid:"GRS80"}}])),p=Object.freeze([{id:"rt90_7_5_gon_v",wkid:3020,label:"RT 90 7,5 gon V (EPSG:3020)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_5_gon_v",wkid:3021,label:"RT 90 5 gon V (EPSG:3021)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_2_5_gon_v",wkid:3022,label:"RT 90 2,5 gon V (EPSG:3022)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_0_gon",wkid:3023,label:"RT 90 0 gon (EPSG:3023)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_2_5_gon_o",wkid:3024,label:"RT 90 2,5 gon O (EPSG:3024)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_5_gon_o",wkid:3025,label:"RT 90 5 gon O (EPSG:3025)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"}]),g=Object.freeze([{id:"wgs84",wkid:4326,label:"WGS 84 lat/long (EPSG:4326)",system:"wgs84",axisMessageKeys:["latitude","longitude"],valueOrder:"yx"}]),u=Object.freeze([{id:"sweref_99_geodetic",wkid:4669,label:"SWEREF 99 lat/long (EPSG:4669)",system:"sweref99",axisMessageKeys:["latitude","longitude"],valueOrder:"yx"}]),f=Object.freeze([{id:"wgs84_web_mercator",wkid:3857,label:"WGS 84 Web Mercator (EPSG:3857)",system:"wgs84",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"wgs84_utm33n",wkid:32633,label:"WGS 84 / UTM zone 33N (EPSG:32633)",system:"wgs84",axisMessageKeys:["easting","northing"],valueOrder:"xy"}]),m=Object.freeze([{id:"etrs89",wkid:4258,label:"ETRS89 lat/long (EPSG:4258)",system:"etrs89",axisMessageKeys:["latitude","longitude"],valueOrder:"yx"}]),y=Object.freeze([{id:"itrf2014",wkid:7912,label:"ITRF2014 lat/long (EPSG:7912)",system:"itrf",axisMessageKeys:["latitude","longitude"],valueOrder:"yx"}]),w=3006,b=Object.freeze([...d,...u]),h=Object.freeze([...g,...f]),x=Object.freeze(b.map((e=>e.wkid))),S=(new Set(x),Object.freeze([3006,3007,3008,3009,3010,3011,3012,3013,3014,3015,3016,3017,3018,3019]),Object.freeze([...x])),k=Object.freeze({sweref99:{messageKey:"systemLabelSweref99",defaultLabel:"SWEREF 99"},rt90:{messageKey:"systemLabelRt90",defaultLabel:"RT 90"},wgs84:{messageKey:"systemLabelWgs84",defaultLabel:"WGS 84"},etrs89:{messageKey:"systemLabelEtrs89",defaultLabel:"ETRS89"},itrf:{messageKey:"systemLabelItrf",defaultLabel:"ITRF2014"}}),v=Object.freeze([{id:"sweref99",label:k.sweref99.defaultLabel,labelMessageKey:k.sweref99.messageKey,defaultWkid:w,options:b},{id:"rt90",label:k.rt90.defaultLabel,labelMessageKey:k.rt90.messageKey,defaultWkid:3022,options:p},{id:"wgs84",label:k.wgs84.defaultLabel,labelMessageKey:k.wgs84.messageKey,defaultWkid:4326,options:h},{id:"etrs89",label:k.etrs89.defaultLabel,labelMessageKey:k.etrs89.messageKey,defaultWkid:4258,options:m},{id:"itrf",label:k.itrf.defaultLabel,labelMessageKey:k.itrf.messageKey,defaultWkid:7912,options:y}]),E=v.flatMap((e=>Array.from(e.options))),j=new Map(E.map((e=>[e.wkid,e]))),M=(new Map(E.map(((e,t)=>[e.wkid,t]))),new Map(v.map((e=>[e.id,e])))),R=(Object.freeze({sweref99:w,rt90:3022,wgs84:4326,etrs89:4258,itrf:7912}),/^#([0-9a-f]{6}|[0-9a-f]{8})$/i),C="#000000",P=Object.freeze([{id:"classicPin",labelMessageKey:"pinIconClassicPin",viewBox:"0 0 32 32",svgBody:'<path fill="{{color}}" d="M16 3.5A7.5 7.5 0 0 0 8.5 11c0 4.143 7.5 18.12 7.5 18.12S23.5 15.144 23.5 11A7.5 7.5 0 0 0 16 3.5zm0 11.084a3.583 3.583 0 1 1 0-7.168a3.583 3.583 0 1 1 0 7.168z"/>',mapSymbol:{width:22,height:22,yOffset:10}},{id:"targetCircle",labelMessageKey:"pinIconTargetCircle",viewBox:"0 0 2048 2048",svgBody:'<path fill="{{color}}" d="M1024 128q123 0 237 32t214 90t182 141t140 181t91 214t32 238q0 123-32 237t-90 214t-141 182t-181 140t-214 91t-238 32q-123 0-237-32t-214-90t-182-141t-140-181t-91-214t-32-238q0-123 32-237t90-214t141-182t181-140t214-91t238-32zm0 1664q106 0 204-27t183-78t156-120t120-155t77-184t28-204q0-106-27-204t-78-183t-120-156t-155-120t-184-77t-204-28q-106 0-204 27t-183 78t-156 120t-120 155t-77 184t-28 204q0 106 27 204t78 183t120 156t155 120t184 77t204 28zm0-1152q79 0 149 30t122 83t82 122t31 149q0 79-30 149t-83 122t-122 82t-149 31q-79 0-149-30t-122-83t-82-122t-31-149q0-79 30-149t83-122t122-82t149-31z"/>',mapSymbol:{width:22,height:22,yOffset:0}},{id:"dropMarker",labelMessageKey:"pinIconDropMarker",viewBox:"-7 -1.5 24 24",svgBody:'<path fill="{{color}}" d="M4 10.465a5.002 5.002 0 0 1 1-9.9a5 5 0 0 1 1 9.9v9.1a1 1 0 0 1-2 0v-9.1z"/>',mapSymbol:{width:22,height:22,yOffset:10}},{id:"beaconPin",labelMessageKey:"pinIconBeaconPin",viewBox:"0 0 1024 1024",svgBody:'<path fill="{{color}}" d="M480 512h64v320h-64z"/><path fill="{{color}}" d="M192 896h640a64 64 0 0 0-64-64H256a64 64 0 0 0-64 64zm64-128h512a128 128 0 0 1 128 128v64H128v-64a128 128 0 0 1 128-128zm256-256a192 192 0 1 0 0-384a192 192 0 0 0 0 384zm0 64a256 256 0 1 1 0-512a256 256 0 0 1 0 512z"/>',mapSymbol:{width:22,height:22,yOffset:6}},{id:"ringPin",labelMessageKey:"pinIconRingPin",viewBox:"0 0 24 24",svgBody:'<g fill="none" stroke="{{color}}" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M2 12h3m14 0h3M12 2v3m0 14v3"/><circle cx="12" cy="12" r="7"/><circle cx="12" cy="12" r="3"/></g>',mapSymbol:{width:22,height:22,yOffset:0}}]),W=new Map(P.map((e=>[e.id,e]))),O=P[0].id,_=Object.freeze([{key:"json",extension:"json",mime:"application/json",messageKey:"exportJson"},{key:"xml",extension:"xml",mime:"application/xml",messageKey:"exportXml"},{key:"yaml",extension:"yaml",mime:"application/x-yaml",messageKey:"exportYaml"}]),F=(new Map(_.map((e=>[e.key,e]))),e=>{if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e&&""!==e.trim()){const t=Number(e);if(Number.isFinite(t))return t}return null}),I=(e,t)=>{if(!e||"object"!=typeof e)return;if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const a=e;if("function"==typeof a.get)try{return a.get(t)}catch{return}},K=(e,t,a)=>Math.min(a,Math.max(t,e)),G=e=>{const t=F(e);return null===t?null:t},z=(e,t)=>{if("boolean"==typeof e)return e;if("string"==typeof e){const t=e.trim().toLowerCase();if("true"===t)return!0;if("false"===t)return!1}if("number"==typeof e){if(1===e)return!0;if(0===e)return!1}return t},T=e=>{const t=e.trim();if(!t)return null;const a=t.startsWith("#")?t:`#${t}`;return R.test(a)?a.toUpperCase():null},A={precision:(e,t,a)=>{const s="number"==typeof a?.min?a.min:c.min,n="number"==typeof a?.max?a.max:c.max,r=G(e);if(null===r){const e=G(t),a=null===e?c.min:e;return K(Math.round(a),s,n)}return K(Math.round(r),s,n)},hexColor:(e,t)=>{if("string"==typeof e){const t=T(e);if(t)return t}return T(t)??C},pinIconId:(e,t)=>"string"==typeof e&&W.has(e)?e:t&&W.has(t)?t:O,wkid:(e,t)=>{const a=G(e);if(null===a)return t;const s=j.get(a);return s?s.wkid:t}},N={restrictEnabledWkids:(e,t,a)=>{const s=B(t),n=new Set(s.map((e=>e.wkid))),r=new Set;if(Array.isArray(e))for(const t of e){const e=F(t);null!=e&&r.add(e)}const i=[];for(const e of s)r.has(e.wkid)&&n.has(e.wkid)&&i.push(e.wkid);return 0!==i.length||a?.allowEmpty?i:s.map((e=>e.wkid))}},B=e=>e?E.map((e=>({...e}))):b.map((e=>({...e}))),L=(e,t)=>Array.isArray(t)&&t.includes(e)?e:Array.isArray(t)&&t.length>0?t[0]:w,D=(e,t)=>{const a=t.replace(/\s+/g," ").trim();if(!a)return null;const s=a.split(/\s+/).map((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))).join("\\s+"),n=new RegExp(`^${s}(?:\\s*[-\u2013\u2014]\\s*|\\s+)`,"i"),r=e.match(n);return r?e.slice(r[0].length).trim():null},$=(e,t)=>{const a=M.get(e.system),s=a?t(a.labelMessageKey):null,n=s&&s!==a?.label?s:a?.label??e.system.toUpperCase();if("sweref99"===e.system&&e.metadata){const a=`(EPSG:${e.wkid})`,s=t("zoneNameTm"),r="zoneNameTm"!==s&&""!==s.trim()?s:"TM";if(Math.abs(e.metadata.scaleFactor-.9996)<1e-6)return`${n} ${r} ${a}`;const i=e.metadata.centralMeridian,o=Math.trunc(i),l=Math.round(60*(i-o)),c=l>=60?o+1:o,d=String(l>=60?0:l).padStart(2,"0"),p="E",g=t("zoneNameLocalFormat");return`${n} ${"zoneNameLocalFormat"!==g&&g.includes("{degrees}")?g.replace("{degrees}",c.toString()).replace("{minutes}",d).replace("{direction}",p):`${c}\xb0${d}\u2032 ${p}`} ${a}`}const r=e.label.trim(),i=((e,t)=>{const a=M.get(e.system),s=a?t(a.labelMessageKey):null,n=a?.label??e.system.toUpperCase(),r=new Set;return s&&r.add(s),n&&r.add(n),s&&r.add(s.replace(/\s+/g,"")),n&&r.add(n.replace(/\s+/g,"")),Array.from(r).filter(Boolean)})(e,t);let o=null;for(const e of i){const t=D(r,e);if(null!==t){o=t;break}}const l=o??r;return l?l.toLowerCase().startsWith(n.toLowerCase())?l:`${n} \u2013 ${l}`:n},V=Object.freeze({swerefWkid:w,precision:c.min,showExportButton:!1,copyOnClick:!1,enablePin:!0,includeExtendedSystems:!1,enabledWkids:Array.from(S),pinFillColor:C,pinIconId:O,showProjectionParameters:!1}),U=(e,t)=>{const a=(e=>{if(Array.isArray(e))return e;if(e&&"object"==typeof e){const t=e;if("function"==typeof t.toArray)try{return t.toArray()}catch{return[]}if("function"==typeof t.toJS)try{const e=t.toJS();return Array.isArray(e)?e:[]}catch{return[]}}return[]})(e);return N.restrictEnabledWkids(a,t,{allowEmpty:!1})},q=e=>{const t={swerefWkid:V.swerefWkid,precision:V.precision,showExportButton:V.showExportButton,copyOnClick:V.copyOnClick,enablePin:V.enablePin,includeExtendedSystems:V.includeExtendedSystems,enabledWkids:Array.from(V.enabledWkids),pinFillColor:V.pinFillColor,pinIconId:V.pinIconId,showProjectionParameters:V.showProjectionParameters},a=z(I(e,"includeExtendedSystems"),t.includeExtendedSystems),s=U(I(e,"enabledWkids"),a),n=L(A.wkid(I(e,"swerefWkid"),w),s),r=A.precision(I(e,"precision"),t.precision),i=z(I(e,"showExportButton"),t.showExportButton),o=z(I(e,"copyOnClick"),t.copyOnClick),l=z(I(e,"enablePin"),t.enablePin),c=z(I(e,"showProjectionParameters"),t.showProjectionParameters);return{swerefWkid:n,precision:r,showExportButton:i,copyOnClick:o,enablePin:l,includeExtendedSystems:a,enabledWkids:s,pinFillColor:A.hexColor(I(e,"pinFillColor"),t.pinFillColor),pinIconId:A.pinIconId(I(e,"pinIconId")),showProjectionParameters:c}};o(7965);const H=e=>{if(!((e,t)=>"boolean"==typeof e?e:!!Array.isArray(t)&&t.length>0)(e.hasMap,e.mapWidgetIds))return{hasMap:!1,hasFormats:!1,status:"no-map",messageKey:"noView"};return((e,t)=>"boolean"==typeof e?e:!!Array.isArray(t)&&t.length>0)(e.hasFormats,e.enabledWkids)?{hasMap:!0,hasFormats:!0,status:"ready",messageKey:null}:{hasMap:!0,hasFormats:!1,status:"no-formats",messageKey:"noFormats"}},J=(e,t)=>"boolean"==typeof t?t:!!e?.target?.checked,X={settingsTitle:"Koordinater \u2013 widgetinst\xe4llningar",mapSection:"Kartvy",noView:"Ingen kartvy \xe4r vald",noFormats:"Inga koordinatformat har valts",availableOutputs:"Tillg\xe4ngliga koordinatformat",includeExtendedSystems:"Visa ut\xf6kade koordinatsystem",precision:"Antal decimaler",precisionHelper:"Ange antal decimaler. 0\u20133 f\xf6r meterprecision, 4\u20136 f\xf6r centimeterniv\xe5. Geodetiska format anv\xe4nder minst 5 decimaler",showExportButton:"Visa knappen 'Exportera'",enablePin:"Aktivera mark\xf6r i kartan",copyOnClick:"Kopiera koordinater vid klick i kartan",pinColor:"F\xe4rg p\xe5 kartmark\xf6r",pinIcon:"Symbol f\xf6r kartmark\xf6r",systemLabelSweref99:"SWEREF 99",systemLabelRt90:"RT 90",systemLabelWgs84:"WGS 84",systemLabelEtrs89:"ETRS 89",systemLabelItrf:"ITRF 2014",pinIconClassicPin:"Klassisk kartn\xe5l",pinIconTargetCircle:"M\xe5ltavla",pinIconDropMarker:"Droppformad mark\xf6r",pinIconBeaconPin:"Fyrsymbol",pinIconRingPin:"Ringformad mark\xf6r",swerefZoneCoverage:"SWEREF 99-zoner t\xe4cker hela Sverige med olika centrala meridianer",projectionParametersTitle:"Projektionsparametrar",ellipsoidLabel:"Ellipsoid: GRS 80",zoneCoverageTitle:"SWEREF 99 zonindelning",zoneCoverageDescription:"De 12 lokala projektionszonerna t\xe4cker hela Sverige. Varje zon har en centralmeridian som minimerar avbildningsfel",zoneCoverageTM:"SWEREF 99 TM anv\xe4nds f\xf6r nationell t\xe4ckning med centralmeridian 15\xb0 \xd6.",zoneCoverageLocal:"Lokala zoner (12\xb0\u201324\xb0 \xd6) anv\xe4nds f\xf6r kommunalteknisk verksamhet med skalfaktor 1.0.",swerefInfoTitle:"Om SWEREF 99",swerefInfoBody:"SWEREF 99 \xe4r Sveriges officiella tredimensionella referenssystem sedan 2007 och bygger p\xe5 ETRS89 (epok 1999.5).",swerefEtrs89Note:"SWEREF 99 och ETRS89 kan betraktas som identiska f\xf6r de flesta GPS-till\xe4mpningar i Sverige.",swerefWgs84Note:"WGS 84 och SWEREF 99 skiljer sig f\xf6r n\xe4rvarande med ungef\xe4r 8\u20139 decimeter och differensen \xf6kar n\xe5gra centimeter per \xe5r.",swerefPrecisionNote:"Lokala SWEREF 99-zoner anv\xe4nder skalfaktor 1.0 och begr\xe4nsat zonbredd f\xf6r att h\xe5lla avbildningsfelen inom 50 mm/km.",swerefLearnMore:"L\xe4s mer hos Lantm\xe4teriet",showProjectionParameters:"Visa projektionsparametrar",projectionParametersHelper:"Visar centralmeridian, skalfaktor samt falska koordinater f\xf6r vald zon."},Y=(0,e.css)({display:"flex",width:"100%",flexDirection:"column",minWidth:0}),Z=(0,e.css)({marginTop:4,opacity:.7}),Q=(0,e.css)({display:"flex",width:"100%",flexWrap:"nowrap",gap:8,justifyContent:"space-between","& > button":{flex:"0 0 44px",height:42,padding:0,display:"flex",alignItems:"center",justifyContent:"center"}}),ee=(0,e.css)({width:28,height:28,pointerEvents:"none"}),te=(0,e.css)({marginTop:8,opacity:.75}),ae=(0,e.css)({marginTop:16,border:"1px solid var(--sys-color-outline, #d0d0d0)",borderRadius:4,padding:12,display:"flex",flexDirection:"column",gap:12}),se=(0,e.css)({display:"flex",alignItems:"center",gap:8,padding:0}),ne=(0,e.css)({fontWeight:600}),re=(0,e.css)({marginTop:4,fontSize:"0.9rem",lineHeight:1.6,color:"var(--sys-color-on-surface-variant, #4a4a4a)"}),ie=(0,e.css)({marginTop:8,fontSize:"0.85rem",fontStyle:"italic"}),oe=(0,e.css)({display:"inline-block",marginTop:12,color:"var(--sys-color-primary, #005e95)",textDecoration:"none","&:hover":{textDecoration:"underline"}}),le=(0,e.css)({display:"inline-flex",alignItems:"center",gap:6}),ce=(0,e.css)({display:"inline-flex",alignItems:"center",color:"var(--sys-color-on-surface-variant, #4a4a4a)"}),{restrictEnabledWkids:de}=N,{precision:pe,hexColor:ge,pinIconId:ue}=A,fe=(e,t)=>{if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e){const t=parseInt(e,10);if(Number.isFinite(t))return t}if(t?.target){const e=parseInt(t.target.value,10);if(Number.isFinite(e))return e}return null},me=(e,t)=>{"undefined"!=typeof console&&("function"!=typeof console.debug?"function"!=typeof console.info?"function"==typeof console.log&&console.log("[Koordinater][Settings]",e,t):console.info("[Koordinater][Settings]",e,t):console.debug("[Koordinater][Settings]",e,t))},ye=({value:t,defaultValue:s,onChange:n,"aria-label":r})=>(0,e.jsx)(a.ColorPicker,{color:t||s||"#000000",onChange:e=>{n?.(e)},"aria-label":r,css:Y}),we=({definition:t,color:a})=>{const n=ge(a,C),r=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="${t.viewBox}">${t.svgBody.replace(/{{color}}/g,n)}</svg>`;let i=null;try{const e="undefined"!=typeof window&&"function"==typeof window.btoa?window.btoa:"function"==typeof btoa?btoa:null;if(e){const t=encodeURIComponent(r).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(parseInt(t,16))));i=`data:image/svg+xml;base64,${e(t)}`}}catch{i=null}return i||(i=`data:image/svg+xml;utf8,${encodeURIComponent(r)}`),(0,e.jsx)(s.SVG,{src:i,role:"img","aria-hidden":"true",focusable:"false",css:ee,currentColor:!1})},be=a=>{(0,n.useTheme)();const r=e.hooks.useTranslation(X),o=a.config,l=q(o),d=e.hooks.useLatest(l.precision),p=de(l.enabledWkids,l.includeExtendedSystems,{allowEmpty:!0}),[g,u]=e.React.useState((()=>l.includeExtendedSystems)),[f,m]=e.React.useState((()=>[...p])),[y,w]=e.React.useState((()=>L(l.swerefWkid,p))),[b,h]=e.React.useState((()=>l.precision)),[x,S]=e.React.useState((()=>!!l.showExportButton)),[k,v]=e.React.useState((()=>!!l.copyOnClick)),[E,j]=e.React.useState((()=>!!l.enablePin)),[M,R]=e.React.useState((()=>l.pinFillColor||C)),[W,_]=e.React.useState((()=>l.pinIconId||O)),[F,I]=e.React.useState((()=>!!l.showProjectionParameters)),[K,G]=e.React.useState(!1),z=e.React.useId(),T=P,A=e.hooks.useLatest(W),N=e.React.useRef(p.map(String).sort().join("|")),D=B(g).map((e=>({value:e.wkid.toString(),label:$(e,r)}))),V=H({hasMap:!!a.useMapWidgetIds?.length,enabledWkids:f}),U=V.hasMap,ee=V.hasFormats,be="no-map"===V.status&&V.messageKey?r(V.messageKey):null,he="no-formats"===V.status&&V.messageKey?r(V.messageKey):null;e.hooks.useUpdateEffect((()=>{const e=q(o),t=e.includeExtendedSystems,a=de(e.enabledWkids,t,{allowEmpty:!0});N.current=a.map(String).sort().join("|"),u(t),m(a),w(L(e.swerefWkid,a)),h(e.precision),S(!!e.showExportButton),v(!!e.copyOnClick),j(!!e.enablePin),R(e.pinFillColor||C),_(e.pinIconId||O),I(!!e.showProjectionParameters)}),[o]);const xe=e.hooks.useEventCallback((e=>{let t=a.config;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){const s=e[a];void 0!==s&&(t=t.set(a,s))}a.onSettingChange({id:a.id,config:t})})),Se=e.hooks.useEventCallback((e=>{a.onSettingChange({id:a.id,useMapWidgetIds:e})})),ke=e.hooks.useEventCallback(((e,t,a)=>{const s=(e=>{return e?Array.isArray(e)?[...e]:"object"==typeof(t=e)&&null!==t&&"function"==typeof t.toArray?e.toArray():[]:[];var t})(e),n=s.map(String).sort().join("|");if(n===N.current)return;N.current=n;const r=de(s,g,{allowEmpty:!0});m(r),me("availableOutputsChange",{source:t,includeExtended:g,rawValue:a,enabledWkids:r});let i={enabledWkids:r};const o=L(y,r);o!==y&&(w(o),i={...i,swerefWkid:o}),xe(i)})),ve=e.hooks.useEventCallback(((e,t)=>{const a=J(e,t);if(u(a),!a){const e=de(f,!1,{allowEmpty:!0});N.current=e.map(String).sort().join("|"),m(e);let t={includeExtendedSystems:a,enabledWkids:e};const s=L(y,e);return s!==y&&(w(s),t={...t,swerefWkid:s}),void xe(t)}xe({includeExtendedSystems:a,enabledWkids:f})})),Ee=e.hooks.useEventCallback(((e,t)=>{ke(t,"change",e)})),je=e.hooks.useEventCallback(((e,t,a)=>{ke(a,"click",t)})),Me=e.hooks.useEventCallback((e=>{const t=Number.isFinite(b)?b:d.current,a=pe(e,t);h(a),xe({precision:a})})),Re=e.hooks.useEventCallback(((e,t)=>{const a=fe(e,t);null!=a&&Me(a)})),Ce=e.hooks.useEventCallback((()=>{const e=Number.isFinite(b)?b:c.min;Me(e)})),Pe=e.hooks.useEventCallback(((e,t)=>(a,s)=>{const n=J(a,s);e(n),xe({[t]:n})})),We=e.hooks.useEventCallback((e=>{const t=ge(e,C);R(t),xe({pinFillColor:t})})),Oe=e.hooks.useEventCallback((e=>{const t=ue(e,O);t!==A.current&&(_(t),xe({pinIconId:t}),me("pinIconChange",{pinIconId:t}))}));return(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(t.SettingSection,{title:r("mapSection")},(0,e.jsx)(t.SettingRow,{level:1,label:"",flow:"wrap"},(0,e.jsx)(t.MapWidgetSelector,{onSelect:Se,useMapWidgetIds:a.useMapWidgetIds})),!U&&be&&(0,e.jsx)(t.SettingRow,{level:1,label:"",flow:"wrap"},(0,e.jsx)("div",{css:te,role:"status","aria-live":"polite"},be))),U&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(t.SettingSection,null,(0,e.jsx)(t.SettingRow,{level:1,label:r("includeExtendedSystems"),tag:"label",flow:"no-wrap"},(0,e.jsx)(s.Switch,{checked:!!g,onChange:ve})),(0,e.jsx)(t.SettingRow,{level:1,label:r("availableOutputs"),tag:"label",flow:"wrap"},(0,e.jsx)(s.MultiSelect,{values:f.map(String),onChange:Ee,onClickItem:je,placeholder:r("availableOutputs"),items:D,css:Y},D.map((t=>(0,e.jsx)(s.MultiSelectItem,{key:t.value,value:t.value,label:t.label}))))),!ee&&he&&(0,e.jsx)(t.SettingRow,{level:1,label:"",flow:"wrap"},(0,e.jsx)("div",{css:te,role:"status","aria-live":"polite"},he))),(0,e.jsx)(t.SettingSection,null,(0,e.jsx)("div",{css:ae},(0,e.jsx)(s.Button,{type:"tertiary",size:"sm",onClick:()=>{G((e=>!e))},"aria-expanded":K,"aria-controls":z,css:se},(0,e.jsx)(s.SVG,{src:i(),size:16,"aria-hidden":"true",role:"presentation"}),(0,e.jsx)("span",{css:ne},r("swerefInfoTitle"))),(0,e.jsx)(s.Collapse,{isOpen:K,"aria-hidden":!K},(0,e.jsx)("div",{css:re,id:z},(0,e.jsx)("div",null,r("swerefInfoBody")),(0,e.jsx)("div",{css:ie},r("swerefEtrs89Note")),(0,e.jsx)("div",{css:ie},r("swerefWgs84Note")),(0,e.jsx)("div",{css:ie},r("swerefPrecisionNote")),(0,e.jsx)("div",{css:ie},r("zoneCoverageDescription")),(0,e.jsx)("div",{css:ie},r("zoneCoverageTM")),(0,e.jsx)("div",{css:ie},r("zoneCoverageLocal")),(0,e.jsx)("a",{href:"https://www.lantmateriet.se/sv/geodata/gps-geodesi-och-swepos/Referenssystem/Tredimensionella-system/SWEREF-99/",target:"_blank",rel:"noopener noreferrer",css:oe},r("swerefLearnMore"))))))),U&&ee&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(t.SettingSection,null,(0,e.jsx)(t.SettingRow,{level:1,label:r("precision"),tag:"label",flow:"wrap"},(0,e.jsx)(s.NumericInput,{value:Number.isFinite(b)?b:c.min,onChange:Re,onAcceptValue:e=>{const t=fe(e);null==t?Ce():Me(t)},min:c.min,max:c.max,"aria-label":r("precision"),css:Y}),(0,e.jsx)("div",{css:Z},r("precisionHelper")))),(0,e.jsx)(t.SettingSection,null,(0,e.jsx)(t.SettingRow,{level:1,label:r("showExportButton"),tag:"label",flow:"no-wrap"},(0,e.jsx)(s.Switch,{checked:!!x,onChange:Pe(S,"showExportButton")})),(0,e.jsx)(t.SettingRow,{level:1,label:r("enablePin"),tag:"label",flow:"no-wrap"},(0,e.jsx)(s.Switch,{checked:!!E,onChange:Pe(j,"enablePin")})),(0,e.jsx)(t.SettingRow,{level:1,label:r("copyOnClick"),tag:"label",flow:"no-wrap"},(0,e.jsx)(s.Switch,{checked:!!k,onChange:Pe(v,"copyOnClick")})),(0,e.jsx)(t.SettingRow,{level:1,tag:"label",flow:"no-wrap",label:(0,e.jsx)("span",{css:le},r("showProjectionParameters"),(0,e.jsx)(s.Tooltip,{title:r("projectionParametersHelper"),placement:"top"},(0,e.jsx)("span",{css:ce,"aria-hidden":"true"},(0,e.jsx)(s.SVG,{src:i(),size:14,role:"presentation"}))))},(0,e.jsx)(s.Switch,{checked:!!F,onChange:Pe(I,"showProjectionParameters"),"aria-label":r("showProjectionParameters")}))),E&&(0,e.jsx)(t.SettingSection,null,(0,e.jsx)(t.SettingRow,{level:1,label:r("pinColor"),tag:"label",flow:"wrap"},(0,e.jsx)(ye,{value:M,onChange:We,"aria-label":r("pinColor")})),(0,e.jsx)(t.SettingRow,{level:1,label:r("pinIcon"),tag:"label",flow:"wrap"},(0,e.jsx)(s.AdvancedButtonGroup,{css:Q,size:"sm"},T.map((t=>{const a=r(t.labelMessageKey),n=W===t.id;return(0,e.jsx)(s.Button,{key:t.id,icon:!0,type:"tertiary",active:n,onClick:()=>Oe(t.id),"aria-label":a,title:a},(0,e.jsx)(we,{definition:t,color:M}))})))))))};function he(e){o.p=e}})(),l})())}}}));