System.register(["jimu-core","jimu-arcgis","jimu-ui","jimu-theme"],(function(e,t){var n={},r={},o={},s={};return{setters:[function(e){n.React=e.React,n.css=e.css,n.hooks=e.hooks,n.jsx=e.jsx},function(e){r.JimuMapViewComponent=e.JimuMapViewComponent,r.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules},function(e){o.Button=e.Button,o.Dropdown=e.Dropdown,o.DropdownButton=e.DropdownButton,o.DropdownItem=e.DropdownItem,o.DropdownMenu=e.DropdownMenu,o.SVG=e.SVG,o.defaultMessages=e.defaultMessages},function(e){s.useTheme=e.useTheme}],execute:function(){e((()=>{var e={655:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .54.54 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.54.54 0 0 1 0-.738" clip-rule="evenodd"></path></svg>'},1888:e=>{"use strict";e.exports=s},2686:e=>{"use strict";e.exports=r},4213:function(e,t,n){var r,o,s;o=[],void 0===(s="function"==typeof(r=function(){"use strict";function t(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){l(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,i=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,t,n){var i=a.URL||a.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?s(l):o(l.href)?r(e,t,n):s(l,l.target="_blank")):(l.href=i.createObjectURL(e),setTimeout((function(){i.revokeObjectURL(l.href)}),4e4),setTimeout((function(){s(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,a){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,a),n);else if(o(e))r(e,n,a);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout((function(){s(i)}))}}:function(e,t,n,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,n);var s="application/octet-stream"===e.type,l=/constructor/i.test(a.HTMLElement)||a.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&l||i)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},u.readAsDataURL(e)}else{var d=a.URL||a.webkitURL,p=d.createObjectURL(e);o?o.location=p:location.href=p,o=null,setTimeout((function(){d.revokeObjectURL(p)}),4e4)}});a.saveAs=l.saveAs=l,e.exports=l})?r.apply(t,o):r)||(e.exports=s)},4321:e=>{"use strict";e.exports=o},4647:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjMDAwMDAwIj48ZyBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxLjIiPjxwYXRoIGQ9Ik0yIDEyaDNtMTQgMGgzTTEyIDJ2M20wIDE0djMiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI3Ii8+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMyIvPjwvZz48L3N2Zz4="},5343:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxLjIiIGQ9Ik0yIDEyaDNtMTQgMGgzTTEyIDJ2M20wIDE0djNNNy4xMSA3LjExQzUuODMgOC4zOSA1IDEwLjEgNSAxMmMwIDMuODcgMy4xMyA3IDcgN2MxLjkgMCAzLjYxLS44MyA0Ljg5LTIuMTFtMS44Mi0yLjkzYy4xOS0uNjMuMjktMS4yOS4yOS0xLjk2YzAtMy44Ny0zLjEzLTctNy03Yy0uNjcgMC0xLjMzLjEtMS45Ni4yOU0yIDJsMjAgMjAiLz48L3N2Zz4="},5420:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNi45NzI4NyAxMS40ODRDNi45NzI4NyAxMS43NjkgNy4yMDg4NyAxMiA3LjUgMTJDNy43OTExMyAxMiA4LjAyNzEzIDExLjc2OSA4LjAyNzEzIDExLjQ4NFYxLjk3NTU1TDEwLjYwMDEgNC40NzMyNEMxMC44MDYgNC42NzQ3NiAxMS4xMzk3IDQuNjc0NzYgMTEuMzQ1NiA0LjQ3MzI0QzExLjU1MTUgNC4yNzE3MiAxMS41NTE1IDMuOTQ0OTkgMTEuMzQ1NiAzLjc0MzQ3TDcuNSAwTDMuNjU0MzkgMy43NDM0N0MzLjQ0ODU0IDMuOTQ0OTkgMy40NDg1NCA0LjI3MTcyIDMuNjU0MzkgNC40NzMyNEMzLjg2MDI1IDQuNjc0NzYgNC4xOTQwMSA0LjY3NDc2IDQuMzk5ODcgNC40NzMyNEw2Ljk3Mjg3IDEuOTc1NTVWMTEuNDg0Wk0xIDhWMTVIMTRWOEgxNVYxNkgwVjhIMVoiIGZpbGw9ImJsYWNrIi8+DQo8L3N2Zz4NCg=="},6426:e=>{e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},7965:(e,t,n)=>{"use strict";var r=n(6426),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,s,a,i,l,c,u=!1;t||(t={}),n=t.debug||!1;try{if(a=r(),i=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=e,c.ariaHidden="true",c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var s=o[t.format]||o.default;window.clipboardData.setData(s,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(c),i.selectNodeContents(c),l.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),s=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(s,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(i):l.removeAllRanges()),c&&document.body.removeChild(c),a()}return u}},8657:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M11 2v10H3V4.414L5.414 2zM2 4.414a1 1 0 0 1 .293-.707l2.414-2.414A1 1 0 0 1 5.414 1H11a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zM13.048 3v10.56c0 .265-.214.48-.477.48H4V15h8.571c.79 0 1.429-.645 1.429-1.44V3z" clip-rule="evenodd"></path></svg>'},9244:e=>{"use strict";e.exports=n}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="";var i={};return a.p=window.jimuConfig.baseUrl,(()=>{"use strict";a.r(i),a.d(i,{__set_webpack_public_path__:()=>Xe,default:()=>Qe,projectionTestHelpers:()=>qe});var e=a(9244),t=a(2686),n=a(4321),r=a(1888),o=a(655),s=a.n(o),l=a(8657),c=a.n(l),u=a(7965),d=a.n(u);const p=(e,t)=>"boolean"==typeof e?e:!!Array.isArray(t)&&t.length>0,f=(e,t)=>"object"==typeof e&&null!==e&&"function"==typeof e[t],y=(e,t)=>Boolean(e&&e!==t),m=e=>Number.isFinite(e),g=(e,t)=>{if((e=>f(e,"clone"))(t))return t.clone();const n=t,{Point:r}=e;return new r({x:n.x,y:n.y,spatialReference:n.spatialReference})},w=e=>{if((e=>null!==e&&!!e.spatialReference?.isWGS84&&f(e,"normalize"))(e))try{e.normalize()}catch{}return e},b={},h=e=>t=>{if(!e)return null;let n=b[t];if(!n)try{n=new(0,e.SpatialReference)({wkid:t}),b[t]=n}catch{return null}return n},x=e=>"object"==typeof e&&null!==e&&"sys"in e,k=(e,t)=>{if(!x(e))return;const n=e.sys?.color,r=n?.[t];return"object"==typeof r&&null!==r?r:void 0},v=e=>{if("number"==typeof e&&m(e))return e;if("string"==typeof e&&""!==e.trim()){const t=Number(e);if(m(t))return t}return null},M=(e,t)=>{if(!e||"object"!=typeof e)return;if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const n=e;if("function"==typeof n.get)try{return n.get(t)}catch{return}},S=(e,t,n)=>Math.min(n,Math.max(t,e)),E=(e,t,n)=>{if(Number.isNaN(e)||!m(e))return n;try{return new Intl.NumberFormat(void 0,{maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1}).format(e)}catch{return e.toFixed(t)}},I=(e,t,n)=>{const r=Math.max(0,Math.floor(t)),o=e=>{if(!m(e))return null;try{return e.toFixed(r)}catch{return null}},s=o(e.firstValue),a=o(e.secondValue);return s&&a?`${s},${a}`:null},R=async(e,t,n,r)=>{if(!e?.spatialReference||!n)return null;const{projection:o,webMercatorUtils:s}=n,a=e.spatialReference;if(a.wkid===t.wkid)return w(g(n,e));if(!(i=a.wkid,102100!==i&&3857!==i&&102113!==i||4326!==t.wkid))return((e,t)=>{const n=t.webMercatorToGeographic(e);return w(n)})(e,s);var i;if(a.isWGS84&&4326===t.wkid)return w(g(n,e));const l=r(t.wkid);if(!l)return null;const c=a.isWGS84?w(g(n,e)):e,u=await(async(e,t,n)=>{try{return await(async e=>{e&&!e.isLoaded()&&await e.load()})(n),n.project(e,t)}catch{return null}})(c,l,o);return w(u)};var j;!function(e){e.Default="default",e.Linear="linear"}(j||(j={}));const C=new Set(["sweref99","rt90","wgs84","etrs89","itrf"]),L="sweref99",O=Object.freeze({min:0,max:6}),N=j.Default,D=new Set(["latitude","longitude"]),P=Object.freeze([{id:"sweref_99_tm",wkid:3006,label:"SWEREF 99 TM (EPSG:3006)",system:"sweref99",axisMessageKeys:["northing","easting"],valueOrder:"yx"},{id:"sweref_99_12_00",wkid:3007,label:"SWEREF 99 12 00 (EPSG:3007)",system:"sweref99",axisMessageKeys:["northing","easting"],valueOrder:"yx"},{id:"sweref_99_13_30",wkid:3008,label:"SWEREF 99 13 30 (EPSG:3008)",system:"sweref99",axisMessageKeys:["northing","easting"],valueOrder:"yx"},{id:"sweref_99_15_00",wkid:3009,label:"SWEREF 99 15 00 (EPSG:3009)",system:"sweref99",axisMessageKeys:["northing","easting"],valueOrder:"yx"},{id:"sweref_99_16_30",wkid:3010,label:"SWEREF 99 16 30 (EPSG:3010)",system:"sweref99",axisMessageKeys:["northing","easting"],valueOrder:"yx"},{id:"sweref_99_18_00",wkid:3011,label:"SWEREF 99 18 00 (EPSG:3011)",system:"sweref99",axisMessageKeys:["northing","easting"],valueOrder:"yx"},{id:"sweref_99_14_15",wkid:3012,label:"SWEREF 99 14 15 (EPSG:3012)",system:"sweref99",axisMessageKeys:["northing","easting"],valueOrder:"yx"},{id:"sweref_99_15_45",wkid:3013,label:"SWEREF 99 15 45 (EPSG:3013)",system:"sweref99",axisMessageKeys:["northing","easting"],valueOrder:"yx"},{id:"sweref_99_17_15",wkid:3014,label:"SWEREF 99 17 15 (EPSG:3014)",system:"sweref99",axisMessageKeys:["northing","easting"],valueOrder:"yx"},{id:"sweref_99_18_45",wkid:3015,label:"SWEREF 99 18 45 (EPSG:3015)",system:"sweref99",axisMessageKeys:["northing","easting"],valueOrder:"yx"},{id:"sweref_99_20_15",wkid:3016,label:"SWEREF 99 20 15 (EPSG:3016)",system:"sweref99",axisMessageKeys:["northing","easting"],valueOrder:"yx"},{id:"sweref_99_21_45",wkid:3017,label:"SWEREF 99 21 45 (EPSG:3017)",system:"sweref99",axisMessageKeys:["northing","easting"],valueOrder:"yx"},{id:"sweref_99_23_15",wkid:3018,label:"SWEREF 99 23 15 (EPSG:3018)",system:"sweref99",axisMessageKeys:["northing","easting"],valueOrder:"yx"}]),z=Object.freeze([{id:"rt90_7_5_gon_v",wkid:3020,label:"RT 90 7,5 gon V (EPSG:3020)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_5_gon_v",wkid:3021,label:"RT 90 5 gon V (EPSG:3021)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_2_5_gon_v",wkid:3022,label:"RT 90 2,5 gon V (EPSG:3022)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_0_gon",wkid:3023,label:"RT 90 0 gon (EPSG:3023)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_2_5_gon_o",wkid:3024,label:"RT 90 2,5 gon O (EPSG:3024)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_5_gon_o",wkid:3025,label:"RT 90 5 gon O (EPSG:3025)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"}]),A=Object.freeze([{id:"wgs84",wkid:4326,label:"WGS 84 lat/long (EPSG:4326)",system:"wgs84",axisMessageKeys:["latitude","longitude"],valueOrder:"yx"}]),T=Object.freeze([{id:"sweref_99_geodetic",wkid:4619,label:"SWEREF 99 lat/long (EPSG:4619)",system:"sweref99",axisMessageKeys:["latitude","longitude"],valueOrder:"yx"}]),_=Object.freeze([{id:"wgs84_web_mercator",wkid:3857,label:"WGS 84 Web Mercator (EPSG:3857)",system:"wgs84",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"wgs84_utm33n",wkid:32633,label:"WGS 84 / UTM zone 33N (EPSG:32633)",system:"wgs84",axisMessageKeys:["easting","northing"],valueOrder:"xy"}]),W=Object.freeze([{id:"etrs89",wkid:4258,label:"ETRS89 lat/long (EPSG:4258)",system:"etrs89",axisMessageKeys:["latitude","longitude"],valueOrder:"yx"}]),G=Object.freeze([{id:"itrf2014",wkid:7912,label:"ITRF2014 lat/long (EPSG:7912)",system:"itrf",axisMessageKeys:["latitude","longitude"],valueOrder:"yx"}]),K=3006,F=Object.freeze([...P,...T]),B=Object.freeze([...A,..._]),U=Object.freeze(F.map((e=>e.wkid))),V=(new Set(U),Object.freeze([...U])),$=Object.freeze({sweref99:{messageKey:"systemLabelSweref99",defaultLabel:"SWEREF 99"},rt90:{messageKey:"systemLabelRt90",defaultLabel:"RT 90"},wgs84:{messageKey:"systemLabelWgs84",defaultLabel:"WGS 84"},etrs89:{messageKey:"systemLabelEtrs89",defaultLabel:"ETRS89"},itrf:{messageKey:"systemLabelItrf",defaultLabel:"ITRF2014"}}),J=Object.freeze([{id:"sweref99",label:$.sweref99.defaultLabel,labelMessageKey:$.sweref99.messageKey,defaultWkid:K,options:F},{id:"rt90",label:$.rt90.defaultLabel,labelMessageKey:$.rt90.messageKey,defaultWkid:3022,options:z},{id:"wgs84",label:$.wgs84.defaultLabel,labelMessageKey:$.wgs84.messageKey,defaultWkid:4326,options:B},{id:"etrs89",label:$.etrs89.defaultLabel,labelMessageKey:$.etrs89.messageKey,defaultWkid:4258,options:W},{id:"itrf",label:$.itrf.defaultLabel,labelMessageKey:$.itrf.messageKey,defaultWkid:7912,options:G}]),Z=J.flatMap((e=>Array.from(e.options))),H=new Map(Z.map((e=>[e.wkid,e]))),Y=(new Map(Z.map(((e,t)=>[e.wkid,t]))),new Map(J.map((e=>[e.id,e])))),Q=Object.freeze({sweref99:K,rt90:3022,wgs84:4326,etrs89:4258,itrf:7912}),q=/^#([0-9a-f]{6}|[0-9a-f]{8})$/i,X="#000000",ee=Object.freeze([{id:"classicPin",labelMessageKey:"pinIconClassicPin",viewBox:"0 0 32 32",svgBody:'<path fill="{{color}}" d="M16 3.5A7.5 7.5 0 0 0 8.5 11c0 4.143 7.5 18.12 7.5 18.12S23.5 15.144 23.5 11A7.5 7.5 0 0 0 16 3.5zm0 11.084a3.583 3.583 0 1 1 0-7.168a3.583 3.583 0 1 1 0 7.168z"/>',mapSymbol:{width:22,height:22,yOffset:10}},{id:"targetCircle",labelMessageKey:"pinIconTargetCircle",viewBox:"0 0 2048 2048",svgBody:'<path fill="{{color}}" d="M1024 128q123 0 237 32t214 90t182 141t140 181t91 214t32 238q0 123-32 237t-90 214t-141 182t-181 140t-214 91t-238 32q-123 0-237-32t-214-90t-182-141t-140-181t-91-214t-32-238q0-123 32-237t90-214t141-182t181-140t214-91t238-32zm0 1664q106 0 204-27t183-78t156-120t120-155t77-184t28-204q0-106-27-204t-78-183t-120-156t-155-120t-184-77t-204-28q-106 0-204 27t-183 78t-156 120t-120 155t-77 184t-28 204q0 106 27 204t78 183t120 156t155 120t184 77t204 28zm0-1152q79 0 149 30t122 83t82 122t31 149q0 79-30 149t-83 122t-122 82t-149 31q-79 0-149-30t-122-83t-82-122t-31-149q0-79 30-149t83-122t122-82t149-31z"/>',mapSymbol:{width:22,height:22,yOffset:0}},{id:"dropMarker",labelMessageKey:"pinIconDropMarker",viewBox:"-7 -1.5 24 24",svgBody:'<path fill="{{color}}" d="M4 10.465a5.002 5.002 0 0 1 1-9.9a5 5 0 0 1 1 9.9v9.1a1 1 0 0 1-2 0v-9.1z"/>',mapSymbol:{width:22,height:22,yOffset:10}},{id:"beaconPin",labelMessageKey:"pinIconBeaconPin",viewBox:"0 0 1024 1024",svgBody:'<path fill="{{color}}" d="M480 512h64v320h-64z"/><path fill="{{color}}" d="M192 896h640a64 64 0 0 0-64-64H256a64 64 0 0 0-64 64zm64-128h512a128 128 0 0 1 128 128v64H128v-64a128 128 0 0 1 128-128zm256-256a192 192 0 1 0 0-384a192 192 0 0 0 0 384zm0 64a256 256 0 1 1 0-512a256 256 0 0 1 0 512z"/>',mapSymbol:{width:22,height:22,yOffset:6}},{id:"ringPin",labelMessageKey:"pinIconRingPin",viewBox:"0 0 24 24",svgBody:'<g fill="none" stroke="{{color}}" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M2 12h3m14 0h3M12 2v3m0 14v3"/><circle cx="12" cy="12" r="7"/><circle cx="12" cy="12" r="3"/></g>',mapSymbol:{width:22,height:22,yOffset:0}}]),te=new Map(ee.map((e=>[e.id,e]))),ne=ee[0].id,re=Object.freeze([{key:"json",extension:"json",mime:"application/json",messageKey:"exportJson"},{key:"xml",extension:"xml",mime:"application/xml",messageKey:"exportXml"},{key:"yaml",extension:"yaml",mime:"application/x-yaml",messageKey:"exportYaml"}]),oe=new Map(re.map((e=>[e.key,e]))),se="\u202f",ae="noValue",ie=(e,t)=>"string"==typeof e?e:"number"==typeof e&&Number.isFinite(e)?String(e):t,le=e=>{const t=v(e);return null===t?null:t},ce=(e,t)=>{if("boolean"==typeof e)return e;if("string"==typeof e){const t=e.trim().toLowerCase();if("true"===t)return!0;if("false"===t)return!1}if("number"==typeof e){if(1===e)return!0;if(0===e)return!1}return t},ue=e=>{const t=e.trim();if(!t)return null;const n=t.startsWith("#")?t:`#${t}`;return q.test(n)?n.toUpperCase():null},de={precision:(e,t,n)=>{const r="number"==typeof n?.min?n.min:O.min,o="number"==typeof n?.max?n.max:O.max,s=le(e);if(null===s){const e=le(t),n=null===e?O.min:e;return S(Math.round(n),r,o)}return S(Math.round(s),r,o)},hexColor:(e,t)=>{if("string"==typeof e){const t=ue(e);if(t)return t}return ue(t)??X},pinIconId:(e,t)=>"string"==typeof e&&te.has(e)?e:t&&te.has(t)?t:ne,wkid:(e,t)=>{const n=le(e);if(null===n)return t;const r=H.get(n);return r?r.wkid:t}},pe=(e,t,n)=>{const r=fe(t),o=new Set(r.map((e=>e.wkid))),s=new Set;if(Array.isArray(e))for(const t of e){const e=v(t);null!=e&&s.add(e)}const a=[];for(const e of r)s.has(e.wkid)&&o.has(e.wkid)&&a.push(e.wkid);return 0!==a.length||n?.allowEmpty?a:r.map((e=>e.wkid))},fe=e=>e?Z.map((e=>({...e}))):F.map((e=>({...e}))),ye=e=>{if(!e||0===e.length)return F.map((e=>({...e})));const t=new Set;for(const n of e)"number"==typeof n&&t.add(n);const n=[];for(const e of Z)t.has(e.wkid)&&n.push({...e});return 0===n.length?F.map((e=>({...e}))):n},me=e=>H.get(e),ge=(e,t)=>{const n=t.replace(/\s+/g," ").trim();if(!n)return null;const r=n.split(/\s+/).map((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))).join("\\s+"),o=new RegExp(`^${r}(?:\\s*[-\u2013\u2014]\\s*|\\s+)`,"i"),s=e.match(o);return s?e.slice(s[0].length).trim():null},we=(e,t)=>{const n=Y.get(e.system),r=n?t(n.labelMessageKey):null,o=r&&r!==n?.label?r:n?.label??e.system.toUpperCase(),s=e.label.trim();if(!s)return o;const a=[r||"",n?.label||"",(r||"").replace(/\s+/g,""),(n?.label||"").replace(/\s+/g,"")].filter(Boolean);let i=s;for(const e of a){const t=ge(s,e);if(t){i=t;break}}return i.toLowerCase().startsWith(o.toLowerCase())?i:`${o} \u2013 ${i}`},be=(e,t)=>{const n=e.axisMessageKeys.some((e=>D.has(e))),r=S(Math.floor(Number.isFinite(t)?t:0),O.min,O.max);return n?Math.max(r,5):r},he=Object.freeze({swerefWkid:K,precision:O.min,showExportButton:!1,copyOnClick:!1,enablePin:!0,includeExtendedSystems:!1,enabledWkids:Array.from(V),pinFillColor:X,pinIconId:ne,styleVariant:N}),xe=(e,t)=>{const n=(e=>{if(Array.isArray(e))return e;if(e&&"object"==typeof e){const t=e;if("function"==typeof t.toArray)try{return t.toArray()}catch{return[]}if("function"==typeof t.toJS)try{const e=t.toJS();return Array.isArray(e)?e:[]}catch{return[]}}return[]})(e);return pe(n,t,{allowEmpty:!1})},ke=e=>{const t={swerefWkid:he.swerefWkid,precision:he.precision,showExportButton:he.showExportButton,copyOnClick:he.copyOnClick,enablePin:he.enablePin,includeExtendedSystems:he.includeExtendedSystems,enabledWkids:Array.from(he.enabledWkids),pinFillColor:he.pinFillColor,pinIconId:he.pinIconId,styleVariant:he.styleVariant??N},n=ce(M(e,"includeExtendedSystems"),t.includeExtendedSystems),r=xe(M(e,"enabledWkids"),n),o=(s=de.wkid(M(e,"swerefWkid"),K),a=r,Array.isArray(a)&&a.includes(s)?s:Array.isArray(a)&&a.length>0?a[0]:K);var s,a;const i=de.precision(M(e,"precision"),t.precision),l=ce(M(e,"showExportButton"),t.showExportButton),c=ce(M(e,"copyOnClick"),t.copyOnClick),u=ce(M(e,"enablePin"),t.enablePin),d=de.hexColor(M(e,"pinFillColor"),t.pinFillColor),p=de.pinIconId(M(e,"pinIconId")),f=M(e,"styleVariant");return{swerefWkid:o,precision:i,showExportButton:l,copyOnClick:c,enablePin:u,includeExtendedSystems:n,enabledWkids:r,pinFillColor:d,pinIconId:p,styleVariant:f===j.Linear||f===j.Default?f:t.styleVariant??N}},ve=(e,t)=>{const n=me(e);return n?n.wkid:Q[L]??K},Me=(e,t)=>{const n=e.svgBody.replace(/{{color}}/g,t),r=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="${e.viewBox}" role="img" aria-hidden="true">${n}</svg>`,o="undefined"!=typeof window&&"function"==typeof window.btoa?window.btoa:"function"==typeof btoa?btoa:null;if(!o)return null;try{return`data:image/svg+xml;base64,${o(r)}`}catch{return null}},Se=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),Ee=e=>e.replace(/"/g,'\\"'),Ie=e=>{if(!e||"object"!=typeof e)return!1;const t=e;return"string"==typeof t.label&&"number"==typeof t.value&&Number.isFinite(t.value)},Re=e=>{const t=e&&"object"==typeof e?e:{},n=(r=t.axes,Array.isArray(r)?r.filter(Ie):[]);var r;const o=le(t.wkid)??0,s=le(t.precision)??0,a="string"==typeof(i=t.system)&&C.has(i)?t.system:L;var i;const l=ie(t.zoneLabel,""),c=(e=>{try{const t=ie(e,"");if(!t)return(new Date).toISOString();const n=Date.parse(t);return Number.isNaN(n)?(new Date).toISOString():new Date(n).toISOString()}catch{try{return(new Date).toISOString()}catch{return new Date(Date.now()).toISOString()}}})(t.timestamp),u=(e=>e&&"object"==typeof e?e:null)(t.pointJSON);return{wkid:o,system:a,axes:n,zoneLabel:l,precision:s,timestamp:c,pointJSON:u}},je=e=>{try{return JSON.stringify(e,null,2)}catch{return JSON.stringify({error:"Serialization failed",wkid:e.wkid,system:e.system,zoneLabel:e.zoneLabel},null,2)}},Ce=e=>{const t=(e=>e.map((e=>`  <axis>\n    <label>${Se(e.label)}</label>\n    <value>${Se(String(e.value))}</value>\n  </axis>`)).join("\n"))(e.axes);let n="null";try{n=JSON.stringify(e.pointJSON)}catch{n="null"}return`<?xml version="1.0" encoding="UTF-8"?>\n<coordinates>\n  <wkid>${Se(String(e.wkid))}</wkid>\n  <system>${Se(e.system)}</system>\n  <zoneLabel>${Se(e.zoneLabel)}</zoneLabel>\n  <axes>\n${t}\n  </axes>\n  <precision>${Se(String(e.precision))}</precision>\n  <timestamp>${Se(e.timestamp)}</timestamp>\n  <pointJSON>${Se(n)}</pointJSON>\n</coordinates>\n`},Le=e=>{let t="null";try{t=JSON.stringify(e.pointJSON)}catch{t="null"}return[`wkid: ${e.wkid}`,`system: ${e.system}`,`zoneLabel: "${Ee(e.zoneLabel)}"`,"axes:",...(n=e.axes,n.map((e=>`  - label: "${Ee(e.label)}"\n    value: ${e.value}`))),`precision: ${e.precision}`,`timestamp: "${e.timestamp}"`,`pointJSON: ${t}`].join("\n");var n},Oe=e=>{if("string"!=typeof e)return null;return oe.get(e)??null},Ne=(e,t)=>Number(e.toFixed(t)),De=(e,t,n,r,o)=>{const s=((e,t)=>{const n=e.some((e=>D.has(e))),r=S(Math.floor(Number.isFinite(t)?t:0),O.min,O.max);return n?Math.max(r,5):r})([e.firstAxis,e.secondAxis],n);return{wkid:e.wkid,system:e.system,axes:[{label:r[0],value:Ne(e.firstValue,s)},{label:r[1],value:Ne(e.secondValue,s)}],zoneLabel:t,precision:s,timestamp:(new Date).toISOString(),pointJSON:o}},Pe=(t,n,r)=>{const{surface:o,onSurface:s,activeIconColor:a}=t,i=r?.pinButtonBackground??o?.background;return{output:(0,e.css)({marginLeft:n?.(2),flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:o?.backgroundText??s?.high??s?.variant}),pinButton:(0,e.css)({display:"flex",height:33,backgroundColor:i,"&:hover svg, &:focus-visible svg, &:active svg":{color:a}}),pinIcon:(0,e.css)({transition:"color 120ms ease","&[data-active='true']":{color:a},"& svg":{color:"inherit",fill:"currentColor",stroke:"currentColor",transition:"color 120ms ease"},"& svg [stroke]:not([stroke='none'])":{stroke:"currentColor"},"& svg [fill]:not([fill='none'])":{fill:"currentColor"}}),actions:(0,e.css)({display:"flex",alignItems:"center","&[data-can-copy='false'] [data-role='copy-icon']":{display:"none"}}),copyIcon:(0,e.css)({display:"flex",alignItems:"center",marginRight:n?.(2),opacity:0,pointerEvents:"none",transition:"opacity 120ms ease","&[data-visible='true']":{opacity:.25}})}},ze=(t,n=j.Default)=>{const r=x(t)?t.sys:void 0,o=r?.spacing,s=k(t,"secondary"),a={surface:k(t,"surface"),onSurface:k(t,"onSurface"),activeIconColor:s?.dark??"var(--sys-color-secondary-dark)"};return n===j.Linear?((t,n,r)=>({...Pe(n,r,{pinButtonBackground:"transparent"}),container:(0,e.css)({display:"flex",height:33,background:"transparent"}),controls:(0,e.css)({display:"flex",alignItems:"center",borderBottom:`1px solid ${(()=>{const e=k(t,"neutral");return e?e[500]??e[400]??e[600]??"var(--sys-color-neutral-500)":"var(--sys-color-neutral-500)"})()}`,width:"100%"})}))(t,a,o):((t,n)=>({...Pe(t,n),container:(0,e.css)({display:"flex",height:33,backgroundColor:t.surface?.paper}),controls:(0,e.css)({display:"flex",alignItems:"center",width:"100%"})}))(a,o)};var Ae=a(4213);const{hexColor:Te}=de,_e=(e,t,n)=>{if(e&&t)try{n(e,t)}catch{}},We=(e,t,n,r,o,s)=>{const a=Te(e.current,X),i=t.current??ne,l=(c=i,te.get(c)??ee[0]);var c;if(n.current&&r.current===a&&o.current===i)return{url:n.current,definition:l};const u=`${i}:${a}`,d=s.current.get(u);if(d)return n.current=d,r.current=a,o.current=i,{url:d,definition:l};const p=Me(l,a);return p?(s.current.set(u,p),n.current=p,r.current=a,o.current=i,{url:p,definition:l}):null},Ge=t=>{const{view:n,modules:r,extraModules:o,pinFillColor:s,pinIconId:a}=t,i=e.hooks.useLatest(n),l=e.hooks.useLatest(r),c=e.hooks.useLatest(o?.GraphicsLayer),u=e.hooks.useLatest(s),d=e.hooks.useLatest(a||ne),p=e.React.useRef(null),f=e.React.useRef(null),y=e.React.useRef(null),m=e.React.useRef(null),g=e.React.useRef(null),w=e.React.useRef(null),b=e.React.useRef(null),h=e.React.useRef(new Map),x=e.hooks.useEventCallback((()=>((e,t,n,r)=>{const o=e.current,s=t.current,a=n.current,i=r.current;if(!o)return _e(i,a,((e,t)=>e.remove(t))),n.current=null,r.current=null,null;const l=o.map;if(a&&i&&i!==l&&(_e(i,a,((e,t)=>e.remove(t))),n.current=null,r.current=null),!n.current){if(!s)return null;try{const e=new s({listMode:"hide"});n.current=e,r.current=l,l.add(e)}catch{n.current=null,r.current=null}return n.current}r.current=l;const c=n.current,u=l?.layers;if(!c)return null;if("function"==typeof u?.includes&&u.includes(c))return c;try{l.add(c)}catch{}return c})(i,c,p,f))),k=e.hooks.useEventCallback((()=>{m.current=null,_e(p.current,y.current,((e,t)=>{e.remove(t)})),y.current=null})),v=e.hooks.useEventCallback((e=>{const t=l.current?.Graphic;if(!e||!t)return;const n=x();if(!n)return;const r=We(u,d,g,w,b,h);if(!r)return;const{url:o,definition:s}=r,a=((e,t)=>({type:"picture-marker",url:e,width:t.mapSymbol.width,height:t.mapSymbol.height,yoffset:t.mapSymbol.yOffset}))(o,s);try{let r=y.current;r?(r.geometry=e,r.symbol=a):(r=new t({geometry:e,symbol:a}),y.current=r),_e(n,r,((e,t)=>e.remove(t))),n.add(r)}catch{}})),M=e.hooks.useEventCallback((()=>{const e=m.current;e&&v(e)})),S=e.hooks.useEventCallback((e=>{m.current=e})),E=e.hooks.useEventCallback((()=>m.current));return e.hooks.useUpdateEffect((()=>{x(),M()}),[n,o,r]),e.hooks.useUpdateEffect((()=>{g.current=null,w.current=null,b.current=null,M()}),[s,a]),e.hooks.useUnmount((()=>{k(),_e(f.current,p.current,((e,t)=>e.remove(t))),p.current=null,f.current=null})),{rememberPinnedPoint:S,applyGraphic:v,clearGraphic:k,getPinnedPoint:E}},Ke=t=>{const{modules:n,configRef:r,selectedWkidRef:o,viewRef:s,getSpatialReference:a,translate:i}=t,l=e.hooks.useLatest(n),c=e.hooks.useLatest(i),u=e.React.useRef(null),d=e.React.useRef(null),p=e.hooks.useEventCallback((e=>{u.current=e,e||(d.current=null)})),f=e.hooks.useEventCallback((()=>{d.current=null})),y=e.hooks.useEventCallback((async e=>{const t=c.current,n=t(ae);if(!n)throw new Error("Missing translation for 'noValue'");if(!e)return d.current=null,n;const i=l.current;if(!i)return d.current=null,n;const u=r.current,p=ve(o.current,s.current),f=me(p);if(!f)return d.current=null,n;try{const r=await(async(e,t,n,r)=>{const o=await R(e,t,n,r);if(!o)return null;const s="xy"===t.valueOrder?o.x:o.y,a="xy"===t.valueOrder?o.y:o.x;return{wkid:t.wkid,system:t.system,firstValue:s,secondValue:a,firstAxis:t.axisMessageKeys[0],secondAxis:t.axisMessageKeys[1]}})(e,f,i,a);if(!r)return d.current=null,n;const o=be(f,u.precision);return d.current=r,((e,t,n,r)=>{const o=E(e.firstValue,t,r),s=E(e.secondValue,t,r);return`${n(e.firstAxis)}:${se}${o}, ${n(e.secondAxis)}:${se}${s}`})(r,o,t,n)}catch{return d.current=null,n}}));return{rememberPoint:p,formatPoint:y,getLastPoint:e.hooks.useEventCallback((()=>u.current)),getLastSnapshot:e.hooks.useEventCallback((()=>d.current)),hasSnapshot:e.hooks.useEventCallback((()=>null!=u.current&&null!=d.current)),clearSnapshot:f,formatClipboardText:e.hooks.useEventCallback((()=>{const e=d.current;if(!e)return null;const t=(0,c.current)(ae);if(!t)return null;const n=me(e.wkid);if(!n)return null;const o=be(n,r.current.precision);return I(e,o)}))}},Fe=t=>{const{projection:n,configRef:r,allowedOptionsRef:o,translate:s}=t,a=e.hooks.useLatest(s),i=e.hooks.useEventCallback((()=>n.hasSnapshot()));return{handleExportSelect:e.hooks.useEventCallback((e=>{if(!(e=>"string"==typeof e&&oe.has(e))(e))return;const t=n.getLastSnapshot(),s=n.getLastPoint();if(!t||!s)return;const i=[a.current(t.firstAxis),a.current(t.secondAxis)],l=o.current,c=l?.find((e=>e.wkid===t.wkid))??me(t.wkid);if(!c)throw new Error(`Missing coordinate option metadata for WKID ${t.wkid}`);const u=we(c,a.current),d=De(t,u,r.current.precision,i,(e=>null!==e&&f(e,"toJSON"))(s)?s.toJSON():null),{content:p,mime:y}=((e,t)=>{const n=Oe(t),r=Re(e);if(!n)return{content:je(r),mime:"application/json"};switch(n.key){case"json":return{content:je(r),mime:n.mime};case"xml":return{content:Ce(r),mime:n.mime};case"yaml":return{content:`${Le(r)}\n`,mime:n.mime}}return{content:je(r),mime:"application/json"}})(d,e),m=((e,t)=>{const n=Oe(t),r=Re(e);return`${`coords-${r.system}-${r.wkid}-${r.timestamp}`.toLowerCase().replace(/[^a-z0-9\-]+/g,"-").replace(/^-+|-+$/g,"")}.${n?.extension??t}`})(d,e);try{const e=new Blob([p],{type:y});(0,Ae.saveAs)(e,m)}catch{}})),isReady:i}},Be={title:"Get Coordinates",noView:"No map view connected",noFormats:"No coordinate formats selected",noValue:"No coordinates available",clickMapToPlacePin:"Click on the map to place a marker",format:"Coordinate format",export:"Export",exportJson:"Export to JSON",exportXml:"Export to XML",exportYaml:"Export to YAML",precision:"Number of decimals",copy:"Copy",copied:"Copied",systemLabelSweref99:"SWEREF 99",systemLabelRt90:"RT 90",systemLabelWgs84:"WGS 84",systemLabelEtrs89:"ETRS 89",systemLabelItrf:"ITRF 2014",easting:"E",northing:"N",latitude:"Lat",longitude:"Lon",clipboardUnavailable:"Clipboard service is not available",pinToggleOn:"Enable map marker",pinToggleOff:"Disable map marker"};var Ue=a(5420),Ve=a.n(Ue),$e=a(5343),Je=a.n($e),Ze=a(4647),He=a.n(Ze);const Ye=Be[ae];if(!Ye)throw new Error(`Missing default translation for '${ae}'`);const Qe=o=>{const a=e.hooks.useTranslation(Be,n.defaultMessages),i=e=>((e,t,n)=>{const r=e(t);if(r&&r!==t)return r;const o=n[t];return"string"==typeof o&&o.trim()?o:t})(a,e,Be),l=e.hooks.useLatest(i),{message:u,show:f,clear:m,cancel:g}=(t=>{const[n,r]=e.React.useState(null),o=e.React.useRef(null),s=e.hooks.useEventCallback((()=>{null!=o.current&&(window.clearTimeout(o.current),o.current=null)})),a=e.hooks.useEventCallback((()=>{s(),r(null)})),i=e.hooks.useEventCallback((e=>{const n=t.current;if("function"!=typeof n)return;const a=n(e);if(a){s(),r(a);try{o.current=window.setTimeout((()=>{o.current=null,r(null)}),1e3)}catch{r(null)}}}));return e.hooks.useUnmount((()=>{a()})),{message:n,show:i,clear:a,cancel:s}})(l),{config:w}=(t=>{const[n,r]=e.React.useState((()=>ke(t)));return e.hooks.useUpdateEffect((()=>{r(ke(t))}),[t]),{config:n,setConfig:r}})(o.config),b=w.styleVariant??N,x=e.hooks.useLatest(w),[k,v]=e.React.useState(null),[M,S]=e.React.useState((()=>w.swerefWkid??3006)),[E,I]=e.React.useState(Ye),[R,C]=e.React.useState(!1),[L,O]=e.React.useState(!1),D=((n,r)=>{const[o,s]=e.React.useState(null),a=e.hooks.useCancelablePromiseMaker();return e.hooks.useEffectOnce((()=>{a((0,t.loadArcGISJSAPIModules)(n)).then((e=>{try{s(r(...e))}catch{s(null)}})).catch((()=>{}))})),o})(["esri/geometry/Point","esri/geometry/SpatialReference","esri/geometry/projection","esri/geometry/support/webMercatorUtils","esri/Graphic","esri/layers/GraphicsLayer"],((e,t,n,r,o,s)=>({Point:e,SpatialReference:t,projection:n,webMercatorUtils:r,Graphic:o,GraphicsLayer:s}))),P=function(t=j.Default){const n=(0,r.useTheme)(),o=e.React.useRef(null),s=e.React.useRef(null),a=e.React.useRef(t);let i=o.current;return i&&s.current===n&&a.current===t||(i=ze(n,t),o.current=i,s.current=n,a.current=t),i}(b),z=i(ae);if(!z)throw new Error("Missing translation for 'noValue'");const A=e.hooks.useLatest(k?.view),T=e.hooks.useLatest(M),_=e.hooks.useLatest(R),W=e.hooks.useLatest(z),G=e.React.useRef(null),[K,F]=e.React.useState(!1),B=Ge({view:k?.view,modules:D,extraModules:D,pinFillColor:w.pinFillColor,pinIconId:w.pinIconId}),U=B.getPinnedPoint,[V,$]=e.React.useState((()=>ye(w.enabledWkids))),J=e.hooks.useLatest(V);e.hooks.useUpdateEffect((()=>{$(ye(w.enabledWkids))}),[w.enabledWkids]);const Z=e.React.useRef(h(D));e.hooks.useUpdateEffect((()=>{Z.current=h(D)}),[D]);const H=Z.current,Y=Ke({modules:D,configRef:x,selectedWkidRef:T,viewRef:A,getSpatialReference:H,translate:i}),Q=Fe({projection:Y,configRef:x,allowedOptionsRef:J,translate:i}),q=(X={hasMap:!!k,hasFormats:V.length>0},p(X.hasMap,X.mapWidgetIds)?p(X.hasFormats,X.enabledWkids)?{hasMap:!0,hasFormats:!0,status:"ready",messageKey:null}:{hasMap:!0,hasFormats:!1,status:"no-formats",messageKey:"noFormats"}:{hasMap:!1,hasFormats:!1,status:"no-map",messageKey:"noView"});var X;const ee=w.enablePin&&R&&!L,te=ee?i("clickMapToPlacePin"):null,ne=q.messageKey?i(q.messageKey):te??E,oe=u??ne,se="ready"===q.status&&!ee&&y(E,z),ie="ready"===q.status&&V.length>=2;e.hooks.useUpdateEffect((()=>{se||F(!1)}),[se]);const le=e.hooks.useEventCallback((()=>{B.rememberPinnedPoint(null),B.clearGraphic(),O(!1)})),ce=e.hooks.useEventCallback((e=>{e&&(B.rememberPinnedPoint(e),B.applyGraphic(e),O(!0))}));e.hooks.useUpdateEffect((()=>{w.enablePin||(R&&C(!1),le())}),[w.enablePin,R,le]),e.hooks.useUpdateEffect((()=>{if(!R)return void le();if(!D?.Graphic)return;const e=U();e&&ce(e)}),[R,D,U,ce,le]),e.hooks.useUpdateEffect((()=>{k||(R&&C(!1),le(),Y.rememberPoint(null),I(z),m())}),[k,R,z]),e.hooks.useUpdateEffect((()=>{!V.some((e=>e.wkid===M))&&V.length>0&&S(V[0].wkid)}),[V,M]);const ue=e.React.useRef(0),de=e.hooks.useEventCallback((async(e,t)=>{const n=t?.syncPin??!1,r=++ue.current;Y.rememberPoint(e);const o=W.current;if(!o)throw new Error("Missing translation for 'noValue'");let s=o;try{s=await Y.formatPoint(e)}catch{s=o}return r!==ue.current?null:(I(s),n&&(e&&_.current?ce(e):le()),s)}));e.hooks.useUpdateEffect((()=>{if(!D)return;const e=Y.getLastPoint();e&&de(e).catch((()=>{}))}),[D,Y,de]),e.hooks.useUnmount((()=>{le(),m(),g()})),e.hooks.useUpdateEffect((()=>{const e=w.swerefWkid;"number"==typeof e&&e!==T.current&&S(e)}),[w.swerefWkid]),e.hooks.useUpdateEffect((()=>{const e=Y.getLastPoint();e?de(e).catch((()=>{})):I(z)}),[M,w.precision,z,de]);const pe=e.hooks.useEventCallback((e=>{v(e)})),fe=e.hooks.useEventCallback((e=>{const t=J.current,n="number"==typeof e?e:Number(e);Number.isFinite(n)&&t?.some((e=>e.wkid===n))&&n!==T.current&&S(n)})),me=e.hooks.useEventCallback((async e=>{const t=A.current;if(!t)return;const n=t.toMap({x:e?.x,y:e?.y});if(n)try{const e=await de(n,{syncPin:!0}),t=W.current;e&&t&&w.copyOnClick&&y(e,t)&&be()}catch(e){}}));(t=>{const{view:n,isPinnedRef:r,updateFromPoint:o,handleMapClick:s}=t,a=e.hooks.useLatest(n),i=e.hooks.useLatest(o),l=e.hooks.useLatest(s),c=e.React.useRef(null),u=e.React.useRef(null),d=e.React.useRef(null),p=e.hooks.useEventCallback((()=>{null!=c.current&&(cancelAnimationFrame(c.current),c.current=null)}));e.hooks.useUnmount((()=>{p()})),e.hooks.useUpdateEffect((()=>{const e=a.current;if(!e)return void p();const t=[],n=e.on("pointer-move",(e=>{if(r.current)return;const t=d.current;t&&Math.abs(t.x-e.x)<2&&Math.abs(t.y-e.y)<2||(u.current=e,null==c.current&&(c.current=window.requestAnimationFrame((async()=>{c.current=null;const e=u.current;if(!e||!a.current)return;d.current={x:e.x,y:e.y};const t=a.current.toMap({x:e.x,y:e.y});await i.current(t)}))))}));t.push((()=>{n.remove()}));const o=e.on("click",(e=>{l.current(e)}));return t.push((()=>{o.remove()})),()=>{t.forEach((e=>{e()})),p()}}),[n])})({view:k?.view,isPinnedRef:_,updateFromPoint:de,handleMapClick:me});const ge=e.hooks.useEventCallback((e=>{e?.preventDefault(),e?.stopPropagation&&e.stopPropagation();const t=e?.nativeEvent;t?.stopImmediatePropagation&&t.stopImmediatePropagation(),C((e=>!e))})),be=e.hooks.useEventCallback((()=>{const e=Y.formatClipboardText();if(!e)return void f("clipboardUnavailable");const t=(e=>{if(!e)return!1;try{return d()(e,{format:"text/plain"})}catch{return!1}})(e);f(t?"copied":"clipboardUnavailable")})),he=e.hooks.useEventCallback((()=>{se&&F(!0)})),xe=e.hooks.useEventCallback((()=>{F(!1)})),ve=e.hooks.useEventCallback((()=>{se&&be()})),Me=e.hooks.useEventCallback((e=>{se&&("Enter"!==e.key&&" "!==e.key||(e.preventDefault(),be()))})),Se=R?Je():He();return(0,e.jsx)("div",{css:P.container},(0,e.jsx)(t.JimuMapViewComponent,{useMapWidgetId:o.useMapWidgetIds?.[0],onActiveViewChange:pe}),(0,e.jsx)("div",{css:P.controls},w.enablePin&&(0,e.jsx)(n.Button,{type:"tertiary",icon:!0,css:P.pinButton,"aria-pressed":R,"aria-label":i(R?"pinToggleOff":"pinToggleOn"),title:i(R?"pinToggleOff":"pinToggleOn"),onClick:ge,disabled:!k},(0,e.jsx)(n.SVG,{src:Se,css:P.pinIcon,"aria-hidden":"true","data-active":R?"true":"false",size:22,role:"presentation"})),(0,e.jsx)("div",{css:P.output,ref:G,"aria-live":"polite",onClick:ve,onKeyDown:Me,onMouseEnter:he,onMouseLeave:xe,role:se?"button":void 0,tabIndex:se?0:void 0,"aria-label":se?i("copy"):void 0,title:oe,"data-can-copy":se?"true":"false"},oe),(0,e.jsx)("div",{css:P.actions,"data-role":"actions","data-can-copy":se?"true":"false"},(0,e.jsx)("div",{css:P.copyIcon,"data-role":"copy-icon","data-visible":se&&K?"true":"false","aria-hidden":"true"},(0,e.jsx)(n.SVG,{src:c(),size:20,role:"presentation"})),w.showExportButton&&(0,e.jsx)(n.Dropdown,{activeIcon:!0,menuRole:"listbox","aria-label":i("export")},(0,e.jsx)(n.DropdownButton,{arrow:!1,icon:!0,type:"tertiary",css:P.pinButton,title:i("export"),role:"combobox",disabled:"ready"!==q.status||!Q.isReady()},(0,e.jsx)(n.SVG,{src:Ve(),size:14})),(0,e.jsx)(n.DropdownMenu,{alignment:"start"},re.map((t=>(0,e.jsx)(n.DropdownItem,{key:t.key,onClick:()=>{Q.handleExportSelect(t.key)},role:"menuitem",title:i(t.messageKey)},i(t.messageKey)))))),ie&&(0,e.jsx)(n.Dropdown,{activeIcon:!0,menuRole:"listbox","aria-label":i("format")},(0,e.jsx)(n.DropdownButton,{arrow:!1,icon:!0,type:"tertiary",css:P.pinButton,title:i("format"),role:"combobox",disabled:0===V.length},(0,e.jsx)(n.SVG,{src:s(),size:16})),(0,e.jsx)(n.DropdownMenu,{alignment:"start"},V.map((t=>{const r=we(t,i),o=t.wkid===M;return(0,e.jsx)(n.DropdownItem,{key:t.wkid,active:o,onClick:()=>fe(t.wkid),title:r,role:"menuitemradio","aria-checked":o},r)})))))))},qe={projectPointToOption:R,isValidClipboardText:y,formatSnapshotForClipboard:I};function Xe(e){a.p=e}})(),i})())}}}));