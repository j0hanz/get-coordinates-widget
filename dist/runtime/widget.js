System.register(["jimu-core","jimu-arcgis","jimu-ui","jimu-theme"],(function(e,t){var n={},r={},o={},s={};return{setters:[function(e){n.React=e.React,n.css=e.css,n.hooks=e.hooks,n.jsx=e.jsx},function(e){r.JimuMapViewComponent=e.JimuMapViewComponent,r.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules},function(e){o.Button=e.Button,o.Dropdown=e.Dropdown,o.DropdownButton=e.DropdownButton,o.DropdownItem=e.DropdownItem,o.DropdownMenu=e.DropdownMenu,o.SVG=e.SVG},function(e){s.useTheme=e.useTheme}],execute:function(){e((()=>{var e={655:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .54.54 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.54.54 0 0 1 0-.738" clip-rule="evenodd"></path></svg>'},1888:e=>{"use strict";e.exports=s},2686:e=>{"use strict";e.exports=r},4213:function(e,t,n){var r,o,s;o=[],void 0===(s="function"==typeof(r=function(){"use strict";function t(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){l(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,i=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,t,n){var i=a.URL||a.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?s(l):o(l.href)?r(e,t,n):s(l,l.target="_blank")):(l.href=i.createObjectURL(e),setTimeout((function(){i.revokeObjectURL(l.href)}),4e4),setTimeout((function(){s(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,a){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,a),n);else if(o(e))r(e,n,a);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout((function(){s(i)}))}}:function(e,t,n,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,n);var s="application/octet-stream"===e.type,l=/constructor/i.test(a.HTMLElement)||a.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&l||i)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},u.readAsDataURL(e)}else{var d=a.URL||a.webkitURL,p=d.createObjectURL(e);o?o.location=p:location.href=p,o=null,setTimeout((function(){d.revokeObjectURL(p)}),4e4)}});a.saveAs=l.saveAs=l,e.exports=l})?r.apply(t,o):r)||(e.exports=s)},4321:e=>{"use strict";e.exports=o},4647:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjMDAwMDAwIj48ZyBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxLjIiPjxwYXRoIGQ9Ik0yIDEyaDNtMTQgMGgzTTEyIDJ2M20wIDE0djMiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI3Ii8+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMyIvPjwvZz48L3N2Zz4="},5343:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxLjIiIGQ9Ik0yIDEyaDNtMTQgMGgzTTEyIDJ2M20wIDE0djNNNy4xMSA3LjExQzUuODMgOC4zOSA1IDEwLjEgNSAxMmMwIDMuODcgMy4xMyA3IDcgN2MxLjkgMCAzLjYxLS44MyA0Ljg5LTIuMTFtMS44Mi0yLjkzYy4xOS0uNjMuMjktMS4yOS4yOS0xLjk2YzAtMy44Ny0zLjEzLTctNy03Yy0uNjcgMC0xLjMzLjEtMS45Ni4yOU0yIDJsMjAgMjAiLz48L3N2Zz4="},5420:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNi45NzI4NyAxMS40ODRDNi45NzI4NyAxMS43NjkgNy4yMDg4NyAxMiA3LjUgMTJDNy43OTExMyAxMiA4LjAyNzEzIDExLjc2OSA4LjAyNzEzIDExLjQ4NFYxLjk3NTU1TDEwLjYwMDEgNC40NzMyNEMxMC44MDYgNC42NzQ3NiAxMS4xMzk3IDQuNjc0NzYgMTEuMzQ1NiA0LjQ3MzI0QzExLjU1MTUgNC4yNzE3MiAxMS41NTE1IDMuOTQ0OTkgMTEuMzQ1NiAzLjc0MzQ3TDcuNSAwTDMuNjU0MzkgMy43NDM0N0MzLjQ0ODU0IDMuOTQ0OTkgMy40NDg1NCA0LjI3MTcyIDMuNjU0MzkgNC40NzMyNEMzLjg2MDI1IDQuNjc0NzYgNC4xOTQwMSA0LjY3NDc2IDQuMzk5ODcgNC40NzMyNEw2Ljk3Mjg3IDEuOTc1NTVWMTEuNDg0Wk0xIDhWMTVIMTRWOEgxNVYxNkgwVjhIMVoiIGZpbGw9ImJsYWNrIi8+DQo8L3N2Zz4NCg=="},6426:e=>{e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},7965:(e,t,n)=>{"use strict";var r=n(6426),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,s,a,i,l,c,u=!1;t||(t={}),n=t.debug||!1;try{if(a=r(),i=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=e,c.ariaHidden="true",c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var s=o[t.format]||o.default;window.clipboardData.setData(s,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(c),i.selectNodeContents(c),l.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),s=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(s,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(i):l.removeAllRanges()),c&&document.body.removeChild(c),a()}return u}},8657:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M11 2v10H3V4.414L5.414 2zM2 4.414a1 1 0 0 1 .293-.707l2.414-2.414A1 1 0 0 1 5.414 1H11a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zM13.048 3v10.56c0 .265-.214.48-.477.48H4V15h8.571c.79 0 1.429-.645 1.429-1.44V3z" clip-rule="evenodd"></path></svg>'},9244:e=>{"use strict";e.exports=n}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="";var i={};return a.p=window.jimuConfig.baseUrl,(()=>{"use strict";a.r(i),a.d(i,{__set_webpack_public_path__:()=>Fe,default:()=>Ge,projectionTestHelpers:()=>Ke});var e=a(9244),t=a(2686),n=a(4321),r=a(1888),o=a(655),s=a.n(o),l=a(8657),c=a.n(l);const u=new Set(["sweref99","rt90","wgs84","etrs89","itrf"]),d="sweref99",p=Object.freeze({min:0,max:6}),f=new Set(["latitude","longitude"]),y=Object.freeze([{id:"sweref_99_tm",wkid:3006,label:"SWEREF 99 TM (EPSG:3006)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_12_00",wkid:3007,label:"SWEREF 99 12 00 (EPSG:3007)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_13_30",wkid:3008,label:"SWEREF 99 13 30 (EPSG:3008)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_15_00",wkid:3009,label:"SWEREF 99 15 00 (EPSG:3009)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_16_30",wkid:3010,label:"SWEREF 99 16 30 (EPSG:3010)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_18_00",wkid:3011,label:"SWEREF 99 18 00 (EPSG:3011)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_14_15",wkid:3012,label:"SWEREF 99 14 15 (EPSG:3012)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_15_45",wkid:3013,label:"SWEREF 99 15 45 (EPSG:3013)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_17_15",wkid:3014,label:"SWEREF 99 17 15 (EPSG:3014)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_18_45",wkid:3015,label:"SWEREF 99 18 45 (EPSG:3015)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_20_15",wkid:3016,label:"SWEREF 99 20 15 (EPSG:3016)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_21_45",wkid:3017,label:"SWEREF 99 21 45 (EPSG:3017)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_23_15",wkid:3018,label:"SWEREF 99 23 15 (EPSG:3018)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"sweref_99_24_00",wkid:3019,label:"SWEREF 99 24 00 (EPSG:3019)",system:"sweref99",axisMessageKeys:["easting","northing"],valueOrder:"xy"}]),m=Object.freeze([{id:"rt90_7_5_gon_v",wkid:3020,label:"RT 90 7,5 gon V (EPSG:3020)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_5_gon_v",wkid:3021,label:"RT 90 5 gon V (EPSG:3021)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_2_5_gon_v",wkid:3022,label:"RT 90 2,5 gon V (EPSG:3022)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_0_gon",wkid:3023,label:"RT 90 0 gon (EPSG:3023)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_2_5_gon_o",wkid:3024,label:"RT 90 2,5 gon O (EPSG:3024)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"rt90_5_gon_o",wkid:3025,label:"RT 90 5 gon O (EPSG:3025)",system:"rt90",axisMessageKeys:["easting","northing"],valueOrder:"xy"}]),g=Object.freeze([{id:"wgs84",wkid:4326,label:"WGS 84 lat/long (EPSG:4326)",system:"wgs84",axisMessageKeys:["latitude","longitude"],valueOrder:"yx"}]),w=Object.freeze([{id:"sweref_99_geodetic",wkid:4669,label:"SWEREF 99 lat/long (EPSG:4669)",system:"sweref99",axisMessageKeys:["latitude","longitude"],valueOrder:"yx"}]),b=Object.freeze([{id:"wgs84_web_mercator",wkid:3857,label:"WGS 84 Web Mercator (EPSG:3857)",system:"wgs84",axisMessageKeys:["easting","northing"],valueOrder:"xy"},{id:"wgs84_utm33n",wkid:32633,label:"WGS 84 / UTM zone 33N (EPSG:32633)",system:"wgs84",axisMessageKeys:["easting","northing"],valueOrder:"xy"}]),h=Object.freeze([{id:"etrs89",wkid:4258,label:"ETRS89 lat/long (EPSG:4258)",system:"etrs89",axisMessageKeys:["latitude","longitude"],valueOrder:"yx"}]),k=Object.freeze([{id:"itrf2014",wkid:7912,label:"ITRF2014 lat/long (EPSG:7912)",system:"itrf",axisMessageKeys:["latitude","longitude"],valueOrder:"yx"}]),x=3006,v=Object.freeze([...y,...w]),M=Object.freeze([...g,...b]),S=Object.freeze(v.map((e=>e.wkid))),E=(new Set(S),Object.freeze([...S])),I=Object.freeze({sweref99:{messageKey:"systemLabelSweref99",defaultLabel:"SWEREF 99"},rt90:{messageKey:"systemLabelRt90",defaultLabel:"RT 90"},wgs84:{messageKey:"systemLabelWgs84",defaultLabel:"WGS 84"},etrs89:{messageKey:"systemLabelEtrs89",defaultLabel:"ETRS89"},itrf:{messageKey:"systemLabelItrf",defaultLabel:"ITRF2014"}}),R=Object.freeze([{id:"sweref99",label:I.sweref99.defaultLabel,labelMessageKey:I.sweref99.messageKey,defaultWkid:x,options:v},{id:"rt90",label:I.rt90.defaultLabel,labelMessageKey:I.rt90.messageKey,defaultWkid:3022,options:m},{id:"wgs84",label:I.wgs84.defaultLabel,labelMessageKey:I.wgs84.messageKey,defaultWkid:4326,options:M},{id:"etrs89",label:I.etrs89.defaultLabel,labelMessageKey:I.etrs89.messageKey,defaultWkid:4258,options:h},{id:"itrf",label:I.itrf.defaultLabel,labelMessageKey:I.itrf.messageKey,defaultWkid:7912,options:k}]),j=R.flatMap((e=>Array.from(e.options))),O=new Map(j.map((e=>[e.wkid,e]))),L=(new Map(j.map(((e,t)=>[e.wkid,t]))),new Map(R.map((e=>[e.id,e])))),C=Object.freeze({sweref99:x,rt90:3022,wgs84:4326,etrs89:4258,itrf:7912}),N=/^#([0-9a-f]{6}|[0-9a-f]{8})$/i,P="#000000",D=Object.freeze([{id:"classicPin",labelMessageKey:"pinIconClassicPin",viewBox:"0 0 32 32",svgBody:'<path fill="{{color}}" d="M16 3.5A7.5 7.5 0 0 0 8.5 11c0 4.143 7.5 18.12 7.5 18.12S23.5 15.144 23.5 11A7.5 7.5 0 0 0 16 3.5zm0 11.084a3.583 3.583 0 1 1 0-7.168a3.583 3.583 0 1 1 0 7.168z"/>',mapSymbol:{width:22,height:22,yOffset:10}},{id:"targetCircle",labelMessageKey:"pinIconTargetCircle",viewBox:"0 0 2048 2048",svgBody:'<path fill="{{color}}" d="M1024 128q123 0 237 32t214 90t182 141t140 181t91 214t32 238q0 123-32 237t-90 214t-141 182t-181 140t-214 91t-238 32q-123 0-237-32t-214-90t-182-141t-140-181t-91-214t-32-238q0-123 32-237t90-214t141-182t181-140t214-91t238-32zm0 1664q106 0 204-27t183-78t156-120t120-155t77-184t28-204q0-106-27-204t-78-183t-120-156t-155-120t-184-77t-204-28q-106 0-204 27t-183 78t-156 120t-120 155t-77 184t-28 204q0 106 27 204t78 183t120 156t155 120t184 77t204 28zm0-1152q79 0 149 30t122 83t82 122t31 149q0 79-30 149t-83 122t-122 82t-149 31q-79 0-149-30t-122-83t-82-122t-31-149q0-79 30-149t83-122t122-82t149-31z"/>',mapSymbol:{width:22,height:22,yOffset:0}},{id:"dropMarker",labelMessageKey:"pinIconDropMarker",viewBox:"-7 -1.5 24 24",svgBody:'<path fill="{{color}}" d="M4 10.465a5.002 5.002 0 0 1 1-9.9a5 5 0 0 1 1 9.9v9.1a1 1 0 0 1-2 0v-9.1z"/>',mapSymbol:{width:22,height:22,yOffset:10}},{id:"beaconPin",labelMessageKey:"pinIconBeaconPin",viewBox:"0 0 1024 1024",svgBody:'<path fill="{{color}}" d="M480 512h64v320h-64z"/><path fill="{{color}}" d="M192 896h640a64 64 0 0 0-64-64H256a64 64 0 0 0-64 64zm64-128h512a128 128 0 0 1 128 128v64H128v-64a128 128 0 0 1 128-128zm256-256a192 192 0 1 0 0-384a192 192 0 0 0 0 384zm0 64a256 256 0 1 1 0-512a256 256 0 0 1 0 512z"/>',mapSymbol:{width:22,height:22,yOffset:6}},{id:"ringPin",labelMessageKey:"pinIconRingPin",viewBox:"0 0 24 24",svgBody:'<g fill="none" stroke="{{color}}" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M2 12h3m14 0h3M12 2v3m0 14v3"/><circle cx="12" cy="12" r="7"/><circle cx="12" cy="12" r="3"/></g>',mapSymbol:{width:22,height:22,yOffset:0}}]),A=new Map(D.map((e=>[e.id,e]))),z=D[0].id,T=Object.freeze([{key:"json",extension:"json",mime:"application/json",messageKey:"exportJson"},{key:"xml",extension:"xml",mime:"application/xml",messageKey:"exportXml"},{key:"yaml",extension:"yaml",mime:"application/x-yaml",messageKey:"exportYaml"}]),_=new Map(T.map((e=>[e.key,e]))),W="noValue",G=e=>{if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e&&""!==e.trim()){const t=Number(e);if(Number.isFinite(t))return t}return null},K=(e,t)=>{if(!e||"object"!=typeof e)return;if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const n=e;if("function"==typeof n.get)try{return n.get(t)}catch{return}},F=(e,t,n)=>Math.min(n,Math.max(t,e)),U=(e,t)=>"string"==typeof e?e:"number"==typeof e&&Number.isFinite(e)?String(e):t,B=e=>{const t=G(e);return null===t?null:t},V=(e,t)=>{if("boolean"==typeof e)return e;if("string"==typeof e){const t=e.trim().toLowerCase();if("true"===t)return!0;if("false"===t)return!1}if("number"==typeof e){if(1===e)return!0;if(0===e)return!1}return t},J=e=>{const t=e.trim();if(!t)return null;const n=t.startsWith("#")?t:`#${t}`;return N.test(n)?n.toUpperCase():null},$={precision:(e,t,n)=>{const r="number"==typeof n?.min?n.min:p.min,o="number"==typeof n?.max?n.max:p.max,s=B(e);if(null===s){const e=B(t),n=null===e?p.min:e;return F(Math.round(n),r,o)}return F(Math.round(s),r,o)},hexColor:(e,t)=>{if("string"==typeof e){const t=J(e);if(t)return t}return J(t)??P},pinIconId:(e,t)=>"string"==typeof e&&A.has(e)?e:t&&A.has(t)?t:z,wkid:(e,t)=>{const n=B(e);if(null===n)return t;const r=O.get(n);return r?r.wkid:t}},Z=(e,t,n)=>{const r=H(t),o=new Set(r.map((e=>e.wkid))),s=new Set;if(Array.isArray(e))for(const t of e){const e=G(t);null!=e&&s.add(e)}const a=[];for(const e of r)s.has(e.wkid)&&o.has(e.wkid)&&a.push(e.wkid);return 0!==a.length||n?.allowEmpty?a:r.map((e=>e.wkid))},H=e=>e?j.map((e=>({...e}))):v.map((e=>({...e}))),Y=e=>{if(!e||0===e.length)return v.map((e=>({...e})));const t=new Set;for(const n of e)"number"==typeof n&&t.add(n);const n=[];for(const e of j)t.has(e.wkid)&&n.push({...e});return 0===n.length?v.map((e=>({...e}))):n},Q=e=>O.get(e),q=(e,t)=>{const n=t.replace(/\s+/g," ").trim();if(!n)return null;const r=n.split(/\s+/).map((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))).join("\\s+"),o=new RegExp(`^${r}(?:\\s*[-\u2013\u2014]\\s*|\\s+)`,"i"),s=e.match(o);return s?e.slice(s[0].length).trim():null},X=(e,t)=>{const n=L.get(e.system),r=n?t(n.labelMessageKey):null,o=r&&r!==n?.label?r:n?.label??e.system.toUpperCase(),s=e.label.trim(),a=((e,t)=>{const n=L.get(e.system),r=n?t(n.labelMessageKey):null,o=n?.label??e.system.toUpperCase(),s=new Set;return r&&s.add(r),o&&s.add(o),r&&s.add(r.replace(/\s+/g,"")),o&&s.add(o.replace(/\s+/g,"")),Array.from(s).filter(Boolean)})(e,t);let i=null;for(const e of a){const t=q(s,e);if(null!==t){i=t;break}}const l=i??s;return l?l.toLowerCase().startsWith(o.toLowerCase())?l:`${o} \u2013 ${l}`:o},ee=Object.freeze({swerefWkid:x,precision:p.min,showExportButton:!1,copyOnClick:!1,enablePin:!0,includeExtendedSystems:!1,enabledWkids:Array.from(E),pinFillColor:P,pinIconId:z}),te=(e,t)=>{const n=(e=>{if(Array.isArray(e))return e;if(e&&"object"==typeof e){const t=e;if("function"==typeof t.toArray)try{return t.toArray()}catch{return[]}if("function"==typeof t.toJS)try{const e=t.toJS();return Array.isArray(e)?e:[]}catch{return[]}}return[]})(e);return Z(n,t,{allowEmpty:!1})},ne=e=>{const t={swerefWkid:ee.swerefWkid,precision:ee.precision,showExportButton:ee.showExportButton,copyOnClick:ee.copyOnClick,enablePin:ee.enablePin,includeExtendedSystems:ee.includeExtendedSystems,enabledWkids:Array.from(ee.enabledWkids),pinFillColor:ee.pinFillColor,pinIconId:ee.pinIconId},n=V(K(e,"includeExtendedSystems"),t.includeExtendedSystems),r=te(K(e,"enabledWkids"),n);var o,s;return{swerefWkid:(o=$.wkid(K(e,"swerefWkid"),x),s=r,Array.isArray(s)&&s.includes(o)?o:Array.isArray(s)&&s.length>0?s[0]:x),precision:$.precision(K(e,"precision"),t.precision),showExportButton:V(K(e,"showExportButton"),t.showExportButton),copyOnClick:V(K(e,"copyOnClick"),t.copyOnClick),enablePin:V(K(e,"enablePin"),t.enablePin),includeExtendedSystems:n,enabledWkids:r,pinFillColor:$.hexColor(K(e,"pinFillColor"),t.pinFillColor),pinIconId:$.pinIconId(K(e,"pinIconId"))}},re=(e,t)=>{const n=e.svgBody.replace(/{{color}}/g,t),r=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="${e.viewBox}" role="img" aria-hidden="true">${n}</svg>`,o="undefined"!=typeof window&&"function"==typeof window.btoa?window.btoa:"function"==typeof btoa?btoa:null;if(!o)return null;try{return`data:image/svg+xml;base64,${o(r)}`}catch{return null}},oe=e=>{if(!e||"object"!=typeof e)return!1;const t=e;return"string"==typeof t.label&&"number"==typeof t.value&&Number.isFinite(t.value)},se=e=>{const t=e&&"object"==typeof e?e:{},n=(r=t.axes,Array.isArray(r)?r.filter(oe):[]);var r;const o=B(t.wkid)??0,s=B(t.precision)??0,a="string"==typeof(i=t.system)&&u.has(i)?t.system:d;var i;const l=U(t.zoneLabel,""),c=(e=>{const t=U(e,"");if(!t)return(new Date).toISOString();const n=Date.parse(t);return Number.isNaN(n)?(new Date).toISOString():new Date(n).toISOString()})(t.timestamp),p=(e=>e&&"object"==typeof e?e:null)(t.pointJSON);return{wkid:o,system:a,axes:n,zoneLabel:l,precision:s,timestamp:c,pointJSON:p}},ae=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),ie=e=>JSON.stringify(e,null,2),le=e=>{const t=e.axes.map((e=>`  <axis>\n    <label>${ae(e.label)}</label>\n    <value>${ae(String(e.value))}</value>\n  </axis>`)).join("\n");return`<?xml version="1.0" encoding="UTF-8"?>\n<coordinates>\n  <wkid>${ae(String(e.wkid))}</wkid>\n  <system>${ae(e.system)}</system>\n  <zoneLabel>${ae(e.zoneLabel)}</zoneLabel>\n  <axes>\n${t}\n  </axes>\n  <precision>${ae(String(e.precision))}</precision>\n  <timestamp>${ae(e.timestamp)}</timestamp>\n  <pointJSON>${ae(JSON.stringify(e.pointJSON))}</pointJSON>\n</coordinates>\n`},ce=e=>[`wkid: ${e.wkid}`,`system: ${e.system}`,`zoneLabel: "${e.zoneLabel.replace(/"/g,'\\"')}"`,"axes:",...e.axes.map((e=>`  - label: "${e.label.replace(/"/g,'\\"')}"\n    value: ${e.value}`)),`precision: ${e.precision}`,`timestamp: "${e.timestamp}"`,`pointJSON: ${JSON.stringify(e.pointJSON)}`].join("\n"),ue=e=>{if("string"!=typeof e)return null;return _.get(e)??null},de=(e,t)=>Number(e.toFixed(t)),pe=(e,t,n,r,o)=>{const s=((e,t)=>{const n=e.some((e=>f.has(e))),r=F(Math.floor(Number.isFinite(t)?t:0),p.min,p.max);return n?Math.max(r,5):r})([e.firstAxis,e.secondAxis],n);return{wkid:e.wkid,system:e.system,axes:[{label:r[0],value:de(e.firstValue,s)},{label:r[1],value:de(e.secondValue,s)}],zoneLabel:t,precision:s,timestamp:(new Date).toISOString(),pointJSON:o}},fe=(e,t)=>{const n=Q(e);return n?n.wkid:C[d]??x};var ye=a(7965),me=a.n(ye);const ge=e=>{if(!((e,t)=>"boolean"==typeof e?e:!!Array.isArray(t)&&t.length>0)(e.hasMap,e.mapWidgetIds))return{hasMap:!1,hasFormats:!1,status:"no-map",messageKey:"noView"};return((e,t)=>"boolean"==typeof e?e:!!Array.isArray(t)&&t.length>0)(e.hasFormats,e.enabledWkids)?{hasMap:!0,hasFormats:!0,status:"ready",messageKey:null}:{hasMap:!0,hasFormats:!1,status:"no-formats",messageKey:"noFormats"}},we=(e,t)=>Boolean(e&&e!==t),be=(e,t)=>{if("function"==typeof t.clone)return t.clone();const{Point:n}=e;return new n({x:t.x,y:t.y,spatialReference:t.spatialReference})},he=e=>{if(e?.spatialReference?.isWGS84&&"function"==typeof e.normalize)try{e.normalize()}catch{}return e},ke=e=>{const t={};return n=>{if(!e)return null;let r=t[n];if(!r)try{r=new(0,e.SpatialReference)({wkid:n}),t[n]=r}catch{return null}return r}},xe=e=>"object"==typeof e&&null!==e&&"sys"in e,ve=(e,t)=>{if(!xe(e))return;const n=e.sys?.color,r=n?.[t];return"object"==typeof r&&null!==r?r:void 0},Me=(e,t,n)=>{if(Number.isNaN(e)||!Number.isFinite(e))return n;try{return new Intl.NumberFormat(void 0,{maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1}).format(e)}catch{return e.toFixed(t)}},Se=async(e,t,n,r)=>{if(!e?.spatialReference||!n)return null;const{projection:o,webMercatorUtils:s}=n,a=e.spatialReference;if(a.wkid===t.wkid)return he(be(n,e));const i=a.isWGS84?he(be(n,e)):null;if(a.isWGS84&&4326===t.wkid)return i;if(!(l=a.wkid,102100!==l&&3857!==l&&102113!==l||4326!==t.wkid)){const t=s.webMercatorToGeographic(e);return he(t)}var l;const c=r(t.wkid);if(!c)return null;try{await(async e=>{e&&!e.isLoaded()&&await e.load()})(o);const t=o.project(i??e,c);return he(t)}catch{return null}};var Ee=a(4213);const{hexColor:Ie}=$,Re=(n,r)=>{const[o,s]=e.React.useState(null),a=e.hooks.useCancelablePromiseMaker();return e.hooks.useEffectOnce((()=>{a((0,t.loadArcGISJSAPIModules)(n)).then((e=>{try{s(r(...e))}catch{s(null)}})).catch((()=>{}))})),o},je=t=>{const{view:n,modules:r,extraModules:o,pinFillColor:s,pinIconId:a}=t,i=e.hooks.useLatest(n),l=e.hooks.useLatest(r),c=e.hooks.useLatest(o?.GraphicsLayer),u=e.hooks.useLatest(s),d=e.hooks.useLatest(a||z),p=e.React.useRef(null),f=e.React.useRef(null),y=e.React.useRef(null),m=e.React.useRef(null),g=e.React.useRef(null),w=e.React.useRef(null),b=e.React.useRef(null),h=e.hooks.useEventCallback((()=>{const e=Ie(u.current,P),t=d.current??z,n=(r=t,A.get(r)??D[0]);var r;if(g.current&&w.current===e&&b.current===t)return{url:g.current,definition:n};const o=re(n,e);return o?(g.current=o,w.current=e,b.current=t,{url:o,definition:n}):null})),k=e.hooks.useEventCallback((()=>{const e=i.current,t=c.current,n=p.current,r=f.current;if(!e){if(n&&r)try{r.remove(n)}catch{}return p.current=null,f.current=null,null}const o=e.map;if(n&&r&&r!==o){try{r.remove(n)}catch{}p.current=null,f.current=null}if(!p.current){if(!t)return null;try{const e=new t({listMode:"hide"});p.current=e,f.current=o,o.add(e)}catch{p.current=null,f.current=null}return p.current}f.current=o;const s=p.current,a=o?.layers;if(!s)return null;if("function"==typeof a?.includes&&a.includes(s))return s;try{o.add(s)}catch{}return s})),x=e.hooks.useEventCallback((()=>{m.current=null;const e=y.current,t=p.current;if(e&&t)try{t.remove(e)}catch{}y.current=null})),v=e.hooks.useEventCallback((e=>{const t=l.current?.Graphic;if(!e||!t)return;const n=k();if(!n)return;const r=h();if(!r)return;const{url:o,definition:s}=r,a={type:"picture-marker",url:o,width:s.mapSymbol.width,height:s.mapSymbol.height,yoffset:s.mapSymbol.yOffset};try{let r=y.current;r?(r.geometry=e,r.symbol=a):(r=new t({geometry:e,symbol:a}),y.current=r);try{n.remove(r)}catch{}n.add(r)}catch{}})),M=e.hooks.useEventCallback((()=>{const e=m.current;e&&v(e)})),S=e.hooks.useEventCallback((e=>{m.current=e})),E=e.hooks.useEventCallback((()=>m.current));return e.hooks.useUpdateEffect((()=>{k(),M()}),[n,o]),e.hooks.useUpdateEffect((()=>{M()}),[r]),e.hooks.useUpdateEffect((()=>{g.current=null,w.current=null,b.current=null,M()}),[s,a]),e.hooks.useUnmount((()=>{x();const e=p.current,t=f.current;if(e&&t)try{t.remove(e)}catch{}p.current=null,f.current=null})),{rememberPinnedPoint:S,applyGraphic:v,clearGraphic:x,getPinnedPoint:E}},Oe=t=>{const{modules:n,configRef:r,selectedWkidRef:o,viewRef:s,getSpatialReference:a,translate:i}=t,l=e.hooks.useLatest(n),c=e.hooks.useLatest(i),u=e.React.useRef(null),d=e.React.useRef(null),y=e.hooks.useEventCallback((e=>{u.current=e,e||(d.current=null)})),m=e.hooks.useEventCallback((()=>{d.current=null})),g=e.hooks.useEventCallback((async e=>{const t=c.current,n=t(W);if(!n)throw new Error("Missing translation for 'noValue'");if(!e)return d.current=null,n;const i=l.current;if(!i)return d.current=null,n;const u=r.current,y=fe(o.current,s.current),m=Q(y);if(!m)return d.current=null,n;try{const r=await(async(e,t,n,r)=>{const o=await Se(e,t,n,r);if(!o)return null;const s="xy"===t.valueOrder?o.x:o.y,a="xy"===t.valueOrder?o.y:o.x;return{wkid:t.wkid,system:t.system,firstValue:s,secondValue:a,firstAxis:t.axisMessageKeys[0],secondAxis:t.axisMessageKeys[1]}})(e,m,i,a);if(!r)return d.current=null,n;const o=((e,t)=>{const n=e.axisMessageKeys.some((e=>f.has(e))),r=F(Math.floor(Number.isFinite(t)?t:0),p.min,p.max);return n?Math.max(r,5):r})(m,u.precision),s=Me(r.firstValue,o,n),l=Me(r.secondValue,o,n);return d.current=r,`${t(r.firstAxis)}:\u202f${s}, ${t(r.secondAxis)}:\u202f${l}`}catch{return d.current=null,n}}));return{rememberPoint:y,formatPoint:g,getLastPoint:e.hooks.useEventCallback((()=>u.current)),getLastSnapshot:e.hooks.useEventCallback((()=>d.current)),hasSnapshot:e.hooks.useEventCallback((()=>null!=u.current&&null!=d.current)),clearSnapshot:m}},Le=t=>{const{projection:n,configRef:r,allowedOptionsRef:o,translate:s}=t,a=e.hooks.useLatest(s),i=e.hooks.useEventCallback((()=>n.hasSnapshot()));return{handleExportSelect:e.hooks.useEventCallback((e=>{if(!(e=>"string"==typeof e&&_.has(e))(e))return;const t=n.getLastSnapshot(),s=n.getLastPoint();if(!t||!s)return;const i=[a.current(t.firstAxis),a.current(t.secondAxis)],l=o.current,c=l?.find((e=>e.wkid===t.wkid))??Q(t.wkid);if(!c)throw new Error(`Missing coordinate option metadata for WKID ${t.wkid}`);const u=X(c,a.current),d=pe(t,u,r.current.precision,i,"function"==typeof s.toJSON?s.toJSON():null),{content:p,mime:f}=((e,t)=>{const n=ue(t),r=se(e);if(!n)return{content:ie(r),mime:"application/json"};switch(n.key){case"json":return{content:ie(r),mime:n.mime};case"xml":return{content:le(r),mime:n.mime};case"yaml":return{content:`${ce(r)}\n`,mime:n.mime}}return{content:ie(r),mime:"application/json"}})(d,e),y=((e,t)=>{const n=ue(t),r=se(e);return`${`coords-${r.system}-${r.wkid}-${r.timestamp}`.toLowerCase().replace(/[^a-z0-9\-]+/g,"-").replace(/^-+|-+$/g,"")}.${n?.extension??t}`})(d,e);try{const e=new Blob([p],{type:f});(0,Ee.saveAs)(e,y)}catch{}})),isReady:i}},Ce={title:"Koordinater",noView:"Ingen kartvy \xe4r ansluten",noFormats:"Inga koordinatformat har valts",noValue:"Inga koordinater tillg\xe4ngliga",clickMapToPlacePin:"Klicka p\xe5 kartan f\xf6r att placera en mark\xf6r",format:"Koordinatformat",export:"Exportera",exportJson:"Exportera till JSON",exportXml:"Exportera till XML",exportYaml:"Exportera till YAML",precision:"Antal decimaler",copy:"Kopiera",copied:"Kopierat",systemLabelSweref99:"SWEREF 99",systemLabelRt90:"RT 90",systemLabelWgs84:"WGS 84",systemLabelEtrs89:"ETRS 89",systemLabelItrf:"ITRF 2014",easting:"E",northing:"N",latitude:"Lat",longitude:"Lon",clipboardUnavailable:"Urklippstj\xe4nsten \xe4r inte tillg\xe4nglig",pinToggleOn:"Aktivera mark\xf6r i kartan",pinToggleOff:"Inaktivera mark\xf6r i kartan"};var Ne=a(5420),Pe=a.n(Ne),De=a(5343),Ae=a.n(De),ze=a(4647),Te=a.n(ze);const _e=Ce[W];if(!_e)throw new Error(`Missing default translation for '${W}'`);function We(){const t=(0,r.useTheme)(),n=e.React.useRef(null),o=e.React.useRef(null);let s=n.current;return s&&o.current===t||(s=(t=>{const n=xe(t)?t.sys:void 0,r=n?.spacing,o=ve(t,"secondary"),s=ve(t,"surface"),a=ve(t,"onSurface"),i=o?.dark??"var(--sys-color-secondary-dark)";return{container:(0,e.css)({display:"flex",height:33,backgroundColor:s?.paper}),controls:(0,e.css)({display:"flex",alignItems:"center",width:"100%"}),output:(0,e.css)({marginLeft:r?.(2),flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:s?.backgroundText??a?.high??a?.variant}),pinButton:(0,e.css)({display:"flex",height:33,backgroundColor:s?.background,"&:hover svg, &:focus-visible svg, &:active svg":{color:i}}),pinIcon:(0,e.css)({transition:"color 120ms ease","&[data-active='true']":{color:i},"& svg":{color:"inherit",fill:"currentColor",stroke:"currentColor",transition:"color 120ms ease"},"& svg [stroke]:not([stroke='none'])":{stroke:"currentColor"},"& svg [fill]:not([fill='none'])":{fill:"currentColor"}}),actions:(0,e.css)({display:"flex",alignItems:"center","&[data-can-copy='false'] [data-role='copy-icon']":{display:"none"}}),copyIcon:(0,e.css)({display:"flex",alignItems:"center",marginRight:r?.(2),opacity:0,pointerEvents:"none",transition:"opacity 120ms ease","&[data-visible='true']":{opacity:.25}})}})(t),n.current=s,o.current=t),s}const Ge=r=>{const o=e.hooks.useTranslation(Ce),a=e.hooks.useLatest(o),{message:i,show:l,clear:u}=(t=>{const[n,r]=e.React.useState(null),o=e.React.useRef(null),s=e.hooks.useEventCallback((()=>{null!=o.current&&(window.clearTimeout(o.current),o.current=null),r(null)})),a=e.hooks.useEventCallback((e=>{const n=t.current;if("function"!=typeof n)return;const s=n(e);s&&(null!=o.current&&(window.clearTimeout(o.current),o.current=null),r(s),o.current=window.setTimeout((()=>{o.current=null,r(null)}),1e3))}));return e.hooks.useUnmount((()=>{s()})),{message:n,show:a,clear:s}})(a),[d,p]=e.React.useState((()=>ne(r.config))),f=e.hooks.useLatest(d),[y,m]=e.React.useState(null),[g,w]=e.React.useState((()=>d.swerefWkid??3006)),[b,h]=e.React.useState(_e),[k,x]=e.React.useState(!1),[v,M]=e.React.useState(!1),S=Re(["esri/geometry/Point","esri/geometry/SpatialReference","esri/geometry/projection","esri/geometry/support/webMercatorUtils","esri/Graphic"],((e,t,n,r,o)=>({Point:e,SpatialReference:t,projection:n,webMercatorUtils:r,Graphic:o}))),E=Re(["esri/layers/GraphicsLayer"],(e=>({GraphicsLayer:e})));e.hooks.useUpdateEffect((()=>{p(ne(r.config))}),[r.config]);const I=We(),R=o(W);if(!R)throw new Error("Missing translation for 'noValue'");const j=e.hooks.useLatest(y?.view),O=e.hooks.useLatest(g),L=e.hooks.useLatest(k),C=e.hooks.useLatest(R),N=e.React.useRef(null),[P,D]=e.React.useState(!1),A=je({view:y?.view,modules:S,extraModules:E,pinFillColor:d.pinFillColor,pinIconId:d.pinIconId}),z=A.getPinnedPoint,[_,G]=e.React.useState((()=>Y(d.enabledWkids))),K=e.hooks.useLatest(_);e.hooks.useUpdateEffect((()=>{G(Y(d.enabledWkids))}),[d.enabledWkids]);const F=e.React.useRef(ke(S));e.hooks.useUpdateEffect((()=>{F.current=ke(S)}),[S]);const U=F.current,B=Oe({modules:S,configRef:f,selectedWkidRef:O,viewRef:j,getSpatialReference:U,translate:o}),V=Le({projection:B,configRef:f,allowedOptionsRef:K,translate:o}),J=ge({hasMap:!!y,hasFormats:_.length>0}),$=d.enablePin&&k&&!v,Z=$?o("clickMapToPlacePin"):null,H=J.messageKey?o(J.messageKey):Z??b,Q=i??H,q="ready"===J.status&&!$&&we(b,R),ee="ready"===J.status&&_.length>=2;e.hooks.useUpdateEffect((()=>{q||D(!1)}),[q]);const te=e.hooks.useEventCallback((()=>{A.rememberPinnedPoint(null),A.clearGraphic(),M(!1)})),re=e.hooks.useEventCallback((e=>{e&&(A.rememberPinnedPoint(e),A.applyGraphic(e),M(!0))}));e.hooks.useUpdateEffect((()=>{d.enablePin||(k&&x(!1),te())}),[d.enablePin,k,te]),e.hooks.useUpdateEffect((()=>{if(!k)return void te();if(!S?.Graphic)return;const e=z();e&&re(e)}),[k,S,z,re,te]),e.hooks.useUpdateEffect((()=>{y||(k&&x(!1),te(),B.rememberPoint(null),h(R),u())}),[y,k,R]),e.React.useEffect((()=>{!_.some((e=>e.wkid===g))&&_.length>0&&w(_[0].wkid)}),[_,g]);const oe=e.React.useRef(0),se=e.hooks.useEventCallback((async(e,t)=>{const n=t?.syncPin??!1,r=++oe.current;B.rememberPoint(e);const o=C.current;if(!o)throw new Error("Missing translation for 'noValue'");let s=o;try{s=await B.formatPoint(e)}catch{s=o}return r!==oe.current?null:(h(s),n&&(e&&L.current?re(e):te()),s)}));e.hooks.useUnmount((()=>{te(),u()})),e.hooks.useUpdateEffect((()=>{const e=d.swerefWkid;"number"==typeof e&&e!==O.current&&w(e)}),[d.swerefWkid]),e.hooks.useUpdateEffect((()=>{const e=B.getLastPoint();e?se(e).catch((()=>{})):h(R)}),[g,d.precision,R,se]);const ae=e.hooks.useEventCallback((e=>{m(e)})),ie=e.hooks.useEventCallback((e=>{const t=K.current,n="number"==typeof e?e:Number(e);Number.isFinite(n)&&t?.some((e=>e.wkid===n))&&n!==O.current&&w(n)})),le=e.hooks.useEventCallback((async e=>{const t=j.current;if(!t)return;const n=t.toMap({x:e?.x,y:e?.y});if(n)try{const e=await se(n,{syncPin:!0}),t=C.current;e&&t&&d.copyOnClick&&we(e,t)&&ue(e)}catch{}}));(t=>{const{view:n,isPinnedRef:r,updateFromPoint:o,handleMapClick:s}=t,a=e.hooks.useLatest(n),i=e.hooks.useLatest(o),l=e.hooks.useLatest(s),c=e.React.useRef(null),u=e.React.useRef(null),d=e.hooks.useEventCallback((()=>{null!=c.current&&(cancelAnimationFrame(c.current),c.current=null)}));e.hooks.useUnmount((()=>{d()})),e.hooks.useUpdateEffect((()=>{const e=a.current;if(!e)return void d();const t=[],n=e.on("pointer-move",(e=>{r.current||(u.current=e,null==c.current&&(c.current=window.requestAnimationFrame((async()=>{c.current=null;const e=u.current;if(!e||!a.current)return;const t=a.current.toMap({x:e.x,y:e.y});await i.current(t)}))))}));t.push((()=>{n.remove()}));const o=e.on("click",(e=>{l.current(e)}));return t.push((()=>{o.remove()})),()=>{t.forEach((e=>{e()})),d()}}),[n])})({view:y?.view,isPinnedRef:L,updateFromPoint:se,handleMapClick:le});const ce=e.hooks.useEventCallback((e=>{e?.preventDefault(),e?.stopPropagation&&e.stopPropagation();const t=e?.nativeEvent;t?.stopImmediatePropagation&&t.stopImmediatePropagation(),x((e=>!e))})),ue=e.hooks.useEventCallback((e=>{const t=(e=>{if(!e)return!1;try{return me()(e,{format:"text/plain"})}catch{return!1}})(e);l(t?"copied":"clipboardUnavailable")})),de=e.hooks.useEventCallback((()=>{q&&D(!0)})),pe=e.hooks.useEventCallback((()=>{D(!1)})),fe=e.hooks.useEventCallback((()=>{q&&ue(b)})),ye=e.hooks.useEventCallback((e=>{q&&("Enter"!==e.key&&" "!==e.key||(e.preventDefault(),ue(b)))})),be=k?Ae():Te();return(0,e.jsx)("div",{css:I.container},(0,e.jsx)(t.JimuMapViewComponent,{useMapWidgetId:r.useMapWidgetIds?.[0],onActiveViewChange:ae}),(0,e.jsx)("div",{css:I.controls},d.enablePin&&(0,e.jsx)(n.Button,{type:"tertiary",icon:!0,css:I.pinButton,"aria-pressed":k,"aria-label":o(k?"pinToggleOff":"pinToggleOn"),title:o(k?"pinToggleOff":"pinToggleOn"),onClick:ce,disabled:!y},(0,e.jsx)(n.SVG,{src:be,css:I.pinIcon,"aria-hidden":"true","data-active":k?"true":"false",size:22,role:"presentation"})),(0,e.jsx)("div",{css:I.output,ref:N,"aria-live":"polite",onClick:fe,onKeyDown:ye,onMouseEnter:de,onMouseLeave:pe,role:q?"button":void 0,tabIndex:q?0:void 0,"aria-label":q?o("copy"):void 0,title:Q,"data-can-copy":q?"true":"false"},Q),(0,e.jsx)("div",{css:I.actions,"data-role":"actions","data-can-copy":q?"true":"false"},(0,e.jsx)("div",{css:I.copyIcon,"data-role":"copy-icon","data-visible":q&&P?"true":"false","aria-hidden":"true"},(0,e.jsx)(n.SVG,{src:c(),size:20,role:"presentation"})),d.showExportButton&&(0,e.jsx)(n.Dropdown,{activeIcon:!0,menuRole:"listbox","aria-label":o("export")},(0,e.jsx)(n.DropdownButton,{arrow:!1,icon:!0,type:"tertiary",css:I.pinButton,title:o("export"),role:"combobox",disabled:"ready"!==J.status||!V.isReady()},(0,e.jsx)(n.SVG,{src:Pe(),size:14})),(0,e.jsx)(n.DropdownMenu,{alignment:"start"},T.map((t=>(0,e.jsx)(n.DropdownItem,{key:t.key,onClick:()=>{V.handleExportSelect(t.key)},role:"menuitem",title:o(t.messageKey)},o(t.messageKey)))))),ee&&(0,e.jsx)(n.Dropdown,{activeIcon:!0,menuRole:"listbox","aria-label":o("format")},(0,e.jsx)(n.DropdownButton,{arrow:!1,icon:!0,type:"tertiary",css:I.pinButton,title:o("format"),role:"combobox",disabled:0===_.length},(0,e.jsx)(n.SVG,{src:s(),size:16})),(0,e.jsx)(n.DropdownMenu,{alignment:"start"},_.map((t=>{const r=X(t,o),s=t.wkid===g;return(0,e.jsx)(n.DropdownItem,{key:t.wkid,active:s,onClick:()=>ie(t.wkid),title:r,role:"menuitemradio","aria-checked":s},r)})))))))},Ke={projectPointToOption:Se,hasCopyableText:we};function Fe(e){a.p=e}})(),i})())}}}));